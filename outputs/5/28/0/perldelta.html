<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="/public/img/favicon.ico">
    <title>perldelta - perldoc.perl.org</title>
    <link href="/public/css/main.min.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900' rel='stylesheet' type='text/css'>
  </head>
  <body class="body container-fluid ">
    <div class="wrapper">
        <nav class="navbar navbar-expand-md navbar-dark bg-primary bg-perl fixed-top justify-content-between">
          <a class="navbar-brand" href="/">
            <object class="logo" data="/public/img/logo_perl_doc.svg" type="image/svg+xml">Perl Documentation Logo</object>
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div id="navbar" class="collapse navbar-collapse justify-content-end">
            <div class="nav navbar-nav navbar-right">
              <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" id="dropdown-menu-links" aria-labelledby="navbarDropdown">
                </div>
              </li>
              <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                  <a class="dropdown-item" href="/5/28/0/index-overview.html">Overview</a>
                  <a class="dropdown-item" href="/5/28/0/index-tutorials.html">Tutorials</a>
                  <a class="dropdown-item" href="/5/28/0/index-faq.html">FAQs</a>
                  <a class="dropdown-item" href="/5/28/0/index-history.html">History / Changes</a>
                  <a class="dropdown-item" href="/5/28/0/index-licence.html">License</a>
                  <a class="dropdown-item" href="/5/28/0/index-language.html">Language</a>
                  <a class="dropdown-item" href="/5/28/0/index-functions.html">Functions</a>
                  <a class="dropdown-item" href="/5/28/0/perlop.html">Operators</a>
                  <a class="dropdown-item" href="/5/28/0/perlvar.html">Special Variables</a>
                  <a class="dropdown-item" href="/5/28/0/index-pragmas.html">Pragmas</a>
                  <a class="dropdown-item" href="/5/28/0/index-utilities.html">Utilities</a>
                  <a class="dropdown-item" href="/5/28/0/index-internals.html">Internals</a>
                  <a class="dropdown-item" href="/5/28/0/index-platforms.html">Platform Specific</a>
                </div>
              </li>
              <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle " data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3" class="dropdown-menu letters-wrap">
                  <a class="dropdown-item" href="/5/28/0/index-functions.html">A-Z</a>
                  <a class="dropdown-item" href="/5/28/0/index-functions-by-cat.html">By Category</a>
                  <div class="dropdown-divider"></div>
                  <div class="letter-container">
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-A.html">A</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-B.html">B</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-C.html">C</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-D.html">D</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-E.html">E</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-F.html">F</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-G.html">G</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-H.html">H</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-I.html">I</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-J.html">J</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-L.html">L</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-M.html">M</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-N.html">N</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-O.html">O</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-P.html">P</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-S.html">S</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-T.html">T</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-U.html">U</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-X.html">X</a>
                    </div>
                </div>
              </li>
            </div>
          </div>
          <!--/.nav-collapse -->
        </nav>
     
      <main class="row main-content pb-5 pt-5">
        <div class="col-sm-8 offset-sm-2">
          <div class="row">
            <div class="col-sm-12">
                <div id="breadcrumbs">
                    
    <a href="index.html">Home</a> &gt;
    
      
        <a href="index-history.html">History / Changes</a> &gt;
      
    
    perldelta
  

                </div>
            </div>
          </div>
          <div class="row">
              <article class="col-sm-12 content">
                <div class="documentation-wrapper">
                  <div id="perl_version">
                    <p class='page-title'> Perl 5 version 28.0 documentation</p>
                  </div>
                  <h1>perldelta</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#Core-Enhancements">Core Enhancements</a><ul><li><a href="#Unicode-10.0-is-supported">Unicode 10.0 is supported</a><li><a href="#perlfunc%2fdelete-EXPR-on-key%2fvalue-hash-slices">perlfunc/delete EXPR on key/value hash slices</a><li><a href="#Experimentally%2c-there-are-now-alphabetic-synonyms-for-some-regular-expression-assertions">Experimentally, there are now alphabetic synonyms for some regular expression assertions</a><li><a href="#Mixed-Unicode-scripts-are-now-detectable">Mixed Unicode scripts are now detectable</a><li><a href="#In-place-editing-with-perl--i-is-now-safer">In-place editing with perl -i is now safer</a><li><a href="#Initialisation-of-aggregate-state-variables">Initialisation of aggregate state variables</a><li><a href="#Full-size-inode-numbers">Full-size inode numbers</a><li><a href="#The-sprintf-%25j-format-size-modifier-is-now-available-with-pre-C99-compilers">The sprintf %j format size modifier is now available with pre-C99 compilers</a><li><a href="#Close-on-exec-flag-set-atomically">Close-on-exec flag set atomically</a><li><a href="#String--and-number-specific-bitwise-ops-are-no-longer-experimental">String- and number-specific bitwise ops are no longer experimental</a><li><a href="#Locales-are-now-thread-safe-on-systems-that-support-them">Locales are now thread-safe on systems that support them</a><li><a href="#New-read-only-predefined-variable-%24%7b%5eSAFE_LOCALES%7d">New read-only predefined variable ${^SAFE_LOCALES}</a></ul><li><a href="#Security">Security</a><ul><li><a href="#%5bCVE-2017-12837%5d-Heap-buffer-overflow-in-regular-expression-compiler">[CVE-2017-12837] Heap buffer overflow in regular expression compiler</a><li><a href="#%5bCVE-2017-12883%5d-Buffer-over-read-in-regular-expression-parser">[CVE-2017-12883] Buffer over-read in regular expression parser</a><li><a href="#%5bCVE-2017-12814%5d-%24ENV%7b%24key%7d-stack-buffer-overflow-on-Windows">[CVE-2017-12814] $ENV{$key} stack buffer overflow on Windows</a><li><a href="#Default-Hash-Function-Change">Default Hash Function Change</a></ul><li><a href="#Incompatible-Changes">Incompatible Changes</a><ul><li><a href="#Subroutine-attribute-and-signature-order">Subroutine attribute and signature order</a><li><a href="#Comma-less-variable-lists-in-formats-are-no-longer-allowed">Comma-less variable lists in formats are no longer allowed</a><li><a href="#The-%3alocked-and-%3aunique-attributes-have-been-removed">The :locked and :unique attributes have been removed</a><li><a href="#%5cN%7b%7d-with-nothing-between-the-braces-is-now-illegal">\N{} with nothing between the braces is now illegal</a><li><a href="#Opening-the-same-symbol-as-both-a-file-and-directory-handle-is-no-longer-allowed">Opening the same symbol as both a file and directory handle is no longer allowed</a><li><a href="#Use-of-bare-%3c%3c-to-mean-%3c%3c%22%22-is-no-longer-allowed">Use of bare << to mean <<"" is no longer allowed</a><li><a href="#Setting-%24%2f-to-a-reference-to-a-non-positive-integer-no-longer-allowed">Setting $/ to a reference to a non-positive integer no longer allowed</a><li><a href="#Unicode-code-points-with-values-exceeding-IV_MAX-are-now-fatal">Unicode code points with values exceeding IV_MAX are now fatal</a><li><a href="#The-B%3a%3aOP%3a%3aterse-method-has-been-removed">The B::OP::terse method has been removed</a><li><a href="#Use-of-inherited-AUTOLOAD-for-non-methods-is-no-longer-allowed">Use of inherited AUTOLOAD for non-methods is no longer allowed</a><li><a href="#Use-of-strings-with-code-points-over-0xFF-is-not-allowed-for-bitwise-string-operators">Use of strings with code points over 0xFF is not allowed for bitwise string operators</a><li><a href="#Setting-%24%7b%5eENCODING%7d-to-a-defined-value-is-now-illegal">Setting ${^ENCODING} to a defined value is now illegal</a><li><a href="#Backslash-no-longer-escapes-colon-in-PATH-for-the--S-switch">Backslash no longer escapes colon in PATH for the -S switch</a><li><a href="#the--DH-(DEBUG_H)-misfeature-has-been-removed">the -DH (DEBUG_H) misfeature has been removed</a><li><a href="#Yada-yada-is-now-strictly-a-statement">Yada-yada is now strictly a statement</a><li><a href="#Sort-algorithm-can-no-longer-be-specified">Sort algorithm can no longer be specified</a><li><a href="#Over-radix-digits-in-floating-point-literals">Over-radix digits in floating point literals</a><li><a href="#Return-type-of-unpackstring()">Return type of unpackstring()</a></ul><li><a href="#Deprecations">Deprecations</a><ul><li><a href="#Use-of-perlfunc%2fvec-EXPR%2cOFFSET%2cBITS-on-strings-with-code-points-above-0xFF-is-deprecated">Use of perlfunc/vec EXPR,OFFSET,BITS on strings with code points above 0xFF is deprecated</a><li><a href="#Some-uses-of-unescaped-%22%7b%22-in-regexes-are-no-longer-fatal">Some uses of unescaped "{" in regexes are no longer fatal</a><li><a href="#Use-of-unescaped-%22%7b%22-immediately-after-a-%22(%22-in-regular-expression-patterns-is-deprecated">Use of unescaped "{" immediately after a "(" in regular expression patterns is deprecated</a><li><a href="#Assignment-to-%24%5b-will-be-fatal-in-Perl-5.30">Assignment to $[ will be fatal in Perl 5.30</a><li><a href="#hostname()-won't-accept-arguments-in-Perl-5.32">hostname() won't accept arguments in Perl 5.32</a><li><a href="#Module-removals">Module removals</a></ul><li><a href="#Performance-Enhancements">Performance Enhancements</a><li><a href="#Modules-and-Pragmata">Modules and Pragmata</a><ul><li><a href="#Removal-of-use-vars">Removal of use vars</a><li><a href="#Use-of-DynaLoader-changed-to-XSLoader-in-many-modules">Use of DynaLoader changed to XSLoader in many modules</a><li><a href="#Updated-Modules-and-Pragmata">Updated Modules and Pragmata</a><li><a href="#Removed-Modules-and-Pragmata">Removed Modules and Pragmata</a></ul><li><a href="#Documentation">Documentation</a><ul><li><a href="#Changes-to-Existing-Documentation">Changes to Existing Documentation</a></ul><li><a href="#Diagnostics">Diagnostics</a><ul><li><a href="#New-Diagnostics">New Diagnostics</a><li><a href="#Changes-to-Existing-Diagnostics">Changes to Existing Diagnostics</a></ul><li><a href="#Utility-Changes">Utility Changes</a><ul><li><a href="#the-perlbug-manpage">the perlbug manpage</a></ul><li><a href="#Configuration-and-Compilation">Configuration and Compilation</a><li><a href="#Testing">Testing</a><li><a href="#Packaging">Packaging</a><li><a href="#Platform-Support">Platform Support</a><ul><li><a href="#Discontinued-Platforms">Discontinued Platforms</a><li><a href="#Platform-Specific-Notes">Platform-Specific Notes</a></ul><li><a href="#Internal-Changes">Internal Changes</a><li><a href="#Selected-Bug-Fixes">Selected Bug Fixes</a><li><a href="#Acknowledgements">Acknowledgements</a><li><a href="#Reporting-Bugs">Reporting Bugs</a><li><a href="#Give-Thanks">Give Thanks</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>perldelta - what is new for perl v5.28.0</p>
<a name="DESCRIPTION"></a><h1>DESCRIPTION</h1>
<p>This document describes differences between the 5.26.0 release and the 5.28.0
release.</p>
<p>If you are upgrading from an earlier release such as 5.24.0, first read
<a href="perl5260delta.html">perl5260delta</a>, which describes differences between 5.24.0 and 5.26.0.</p>
<a name="Core-Enhancements"></a><h1>Core Enhancements</h1>
<a name="Unicode-10.0-is-supported"></a><h2>Unicode 10.0 is supported</h2>
<p>A list of changes is at
<a href="http://www.unicode.org/versions/Unicode10.0.0">http://www.unicode.org/versions/Unicode10.0.0</a>.</p>
<a name="perlfunc%2fdelete-EXPR-on-key%2fvalue-hash-slices"></a><h2><a href="functions/delete.html">delete EXPR</a> on key/value hash slices</h2>
<p><a href="functions/delete.html">delete EXPR</a> can now be used on
<a href="perldata.html#Key%2fValue-Hash-Slices">key/value hash slices</a>,
returning the keys along with the deleted values.
<a href="https://rt.perl.org/Ticket/Display.html?id=131328">[perl #131328]</a></p>
<a name="Experimentally%2c-there-are-now-alphabetic-synonyms-for-some-regular-expression-assertions"></a><h2>Experimentally, there are now alphabetic synonyms for some regular expression assertions</h2>
<p>If you find it difficult to remember how to write certain of the pattern
assertions, there are now alphabetic synonyms.</p>
<pre class="verbatim"><ol><li> <span class="w">CURRENT</span>                <span class="w">NEW</span> <span class="w">SYNONYMS</span></li><li> ------                 ------------</li><li> <span class="s">(</span><span class="q">?=...)        (*pla:...) or (*positive_lookahead:...)</span></li><li> <span class="q"> (?</span>!...<span class="s">)</span>        <span class="s">(</span><span class="i">*nla</span><span class="co">:</span>...<span class="s">)</span> <a class="l_k" href="functions/or.html">or</a> <span class="s">(</span><span class="i">*negative_lookahead</span><span class="co">:</span>...<span class="s">)</span></li><li> <span class="s">(</span><span class="q">?&lt;=...)       (*plb:...) or (*positive_lookbehind:...)</span></li><li> <span class="q"> (?</span>&lt;!...<span class="s">)</span>       <span class="s">(</span><span class="i">*nlb</span><span class="co">:</span>...<span class="s">)</span> <a class="l_k" href="functions/or.html">or</a> <span class="s">(</span><span class="i">*negative_lookbehind</span><span class="co">:</span>...<span class="s">)</span></li><li> <span class="s">(</span><span class="q">?&gt;...)        (*atomic:...)</span></li></ol></pre><p>These are considered experimental, so using any of these will raise
(unless turned off) a warning in the <code class="inline"><span class="w">experimental::alpha_assertions</span></code>

category.</p>
<a name="Mixed-Unicode-scripts-are-now-detectable"></a><h2>Mixed Unicode scripts are now detectable</h2>
<p>A mixture of scripts, such as Cyrillic and Latin, in a string is often
the sign of a spoofing attack.  A new regular expression construct
now allows for easy detection of these.  For example, you can say</p>
<pre class="verbatim"><ol><li> <span class="q">qr/(*script_run: \d+ \b )/x</span></li></ol></pre><p>And the digits matched will all be from the same set of 10.  You won't
get a look-alike digit from a different script that has a different
value than what it appears to be.</p>
<p>Or:</p>
<pre class="verbatim"><ol><li> <span class="q">qr/(*sr: \b \w+ \b )/x</span></li></ol></pre><p>makes sure that all the characters come from the same script.</p>
<p>You can also combine script runs with <code class="inline"><span class="s">(</span><span class="q">?&gt;...)</span></code>
 (or
<code class="inline"><span class="i">*atomic</span><span class="co">:</span>...<span class="p">)</span></code>
).</p>
<p>Instead of writing:</p>
<pre class="verbatim"><ol><li>    <span class="s">(</span><span class="i">*sr</span><span class="co">:</span><span class="s">(</span><span class="q">?&lt;...))</span></li></ol></pre><p>you can now run:</p>
<pre class="verbatim"><ol><li>    <span class="s">(</span><span class="i">*asr</span><span class="co">:</span>...<span class="s">)</span></li><li>    <span class="c"># or</span></li><li>    <span class="s">(</span><span class="i">*atomic_script_run</span><span class="co">:</span>...<span class="s">)</span></li></ol></pre><p>This is considered experimental, so using it will raise (unless turned
off) a warning in the <code class="inline"><span class="w">experimental::script_run</span></code>
 category.</p>
<p>See <a href="perlre.html#Script-Runs">Script Runs in perlre</a>.</p>
<a name="In-place-editing-with-perl--i-is-now-safer"></a><h2>In-place editing with <code class="inline"><span class="w">perl</span> -<span class="w">i</span></code>
 is now safer</h2>
<p>Previously in-place editing (<code class="inline"><span class="w">perl</span> -<span class="w">i</span></code>
) would delete or rename the
input file as soon as you started working on a new file.</p>
<p>Without backups this would result in loss of data if there was an
error, such as a full disk, when writing to the output file.</p>
<p>This has changed so that the input file isn't replaced until the
output file has been completely written and successfully closed.</p>
<p>This works by creating a work file in the same directory, which is
renamed over the input file once the output file is complete.</p>
<p>Incompatibilities:</p>
<ul>
<li>
<p>Since this renaming needs to only happen once, if you create a thread
or child process, that renaming will only happen in the original
thread or process.</p>
</li>
<li>
<p>If you change directories while processing a file, and your operating
system doesn't provide the <code class="inline"><span class="i">unlinkat</span><span class="s">(</span><span class="s">)</span></code>
, <code class="inline"><span class="i">renameat</span><span class="s">(</span><span class="s">)</span></code>
 and <code class="inline"><span class="i">fchmodat</span><span class="s">(</span><span class="s">)</span></code>

functions, the final rename step may fail.</p>
</li>
</ul>
<p><a href="https://rt.perl.org/Public/Bug/Display.html?id=127663">[perl #127663]</a></p>
<a name="Initialisation-of-aggregate-state-variables"></a><h2>Initialisation of aggregate state variables</h2>
<p>A persistent lexical array or hash variable can now be initialized,
by an expression such as <code class="inline"><span class="w">state</span> <span class="i">@a</span> = <span class="q">qw(x y z)</span></code>
.  Initialization of a
list of persistent lexical variables is still not possible.</p>
<a name="Full-size-inode-numbers"></a><h2>Full-size inode numbers</h2>
<p>On platforms where inode numbers are of a type larger than perl's native
integer numerical types, <a href="functions/stat.html">stat</a> will preserve the full
content of large inode numbers by returning them in the form of strings of
decimal digits.  Exact comparison of inode numbers can thus be achieved by
comparing with <code class="inline"><a class="l_k" href="functions/eq.html">eq</a></code> rather than <code class="inline">==</code>
.  Comparison with <code class="inline">==</code>
, and other
numerical operations (which are usually meaningless on inode numbers),
work as well as they did before, which is to say they fall back to
floating point, and ultimately operate on a fairly useless rounded inode
number if the real inode number is too big for the floating point format.</p>
<a name="The-sprintf-%25j-format-size-modifier-is-now-available-with-pre-C99-compilers"></a><h2>The <code class="inline"><a class="l_k" href="functions/sprintf.html">sprintf</a></code> <code class="inline"><span class="i">%j</span></code>
 format size modifier is now available with pre-C99 compilers</h2>
<p>The actual size used depends on the platform, so remains unportable.</p>
<a name="Close-on-exec-flag-set-atomically"></a><h2>Close-on-exec flag set atomically</h2>
<p>When opening a file descriptor, perl now generally opens it with its
close-on-exec flag already set, on platforms that support doing so.
This improves thread safety, because it means that an <code class="inline"><a class="l_k" href="functions/exec.html">exec</a></code> initiated
by one thread can no longer cause a file descriptor in the process
of being opened by another thread to be accidentally passed to the
executed program.</p>
<p>Additionally, perl now sets the close-on-exec flag more reliably, whether
it does so atomically or not.  Most file descriptors were getting the
flag set, but some were being missed.</p>
<a name="String--and-number-specific-bitwise-ops-are-no-longer-experimental"></a><h2>String- and number-specific bitwise ops are no longer experimental</h2>
<p>The new string-specific (<code class="inline"><span class="i">&amp;.</span> |. ^. ~.</code>
) and number-specific (<code class="inline"><span class="i">&amp; |</span> ^ ~</code>
)
bitwise operators introduced in Perl 5.22 that are available within the
scope of <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span> <span class="q">&#39;bitwise&#39;</span></code>
 are no longer experimental.
Because the number-specific ops are spelled the same way as the existing
operators that choose their behaviour based on their operands, these
operators must still be enabled via the "bitwise" feature, in either of
these two ways:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span> <span class="q">&quot;bitwise&quot;</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="v">v5.28</span><span class="sc">;</span> <span class="c"># &quot;bitwise&quot; now included</span></li></ol></pre><p>They are also now enabled by the <b>-E</b> command-line switch.</p>
<p>The "bitwise" feature no longer emits a warning.  Existing code that
disables the "experimental::bitwise" warning category that the feature
previously used will continue to work.</p>
<p>One caveat that module authors ought to be aware of is that the numeric
operators now pass a fifth TRUE argument to overload methods.  Any methods
that check the number of operands may croak if they do not expect so many.
XS authors in particular should be aware that this:</p>
<pre class="verbatim"><ol><li>    <span class="w">SV</span> *</li><li>    <span class="w">bitop_handler</span> <span class="s">(</span><span class="w">lobj</span><span class="cm">,</span> <span class="w">robj</span><span class="cm">,</span> <span class="w">swap</span><span class="s">)</span></li></ol></pre><p>may need to be changed to this:</p>
<pre class="verbatim"><ol><li>    <span class="w">SV</span> *</li><li>    <span class="w">bitop_handler</span> <span class="s">(</span><span class="w">lobj</span><span class="cm">,</span> <span class="w">robj</span><span class="cm">,</span> <span class="w">swap</span><span class="cm">,</span> ...<span class="s">)</span></li></ol></pre><a name="Locales-are-now-thread-safe-on-systems-that-support-them"></a><h2>Locales are now thread-safe on systems that support them</h2>
<p>These systems include Windows starting with Visual Studio 2005, and in
POSIX 2008 systems.</p>
<p>The implication is that you are now free to use locales and change them
in a threaded environment.  Your changes affect only your thread.
See <a href="perllocale.html#Multi-threaded-operation">Multi-threaded operation in perllocale</a></p>
<a name="New-read-only-predefined-variable-%24%7b%5eSAFE_LOCALES%7d"></a><h2>New read-only predefined variable <code class="inline"><span class="i">$</span>{<span class="w">^SAFE_LOCALES</span>}</code>
</h2>
<p>This variable is 1 if the Perl interpreter is operating in an
environment where it is safe to use and change locales (see
<a href="perllocale.html">perllocale</a>.)  This variable is true when the perl is
unthreaded, or compiled in a platform that supports thread-safe locale
operation (see previous item).</p>
<a name="Security"></a><h1>Security</h1>
<a name="%5bCVE-2017-12837%5d-Heap-buffer-overflow-in-regular-expression-compiler"></a><h2>[CVE-2017-12837] Heap buffer overflow in regular expression compiler</h2>
<p>Compiling certain regular expression patterns with the case-insensitive
modifier could cause a heap buffer overflow and crash perl.  This has now been
fixed.
<a href="https://rt.perl.org/Public/Bug/Display.html?id=131582">[perl #131582]</a></p>
<a name="%5bCVE-2017-12883%5d-Buffer-over-read-in-regular-expression-parser"></a><h2>[CVE-2017-12883] Buffer over-read in regular expression parser</h2>
<p>For certain types of syntax error in a regular expression pattern, the error
message could either contain the contents of a random, possibly large, chunk of
memory, or could crash perl.  This has now been fixed.
<a href="https://rt.perl.org/Public/Bug/Display.html?id=131598">[perl #131598]</a></p>
<a name="%5bCVE-2017-12814%5d-%24ENV%7b%24key%7d-stack-buffer-overflow-on-Windows"></a><h2>[CVE-2017-12814] <code class="inline"><span class="i">$ENV</span>{<span class="i">$key</span>}</code>
 stack buffer overflow on Windows</h2>
<p>A possible stack buffer overflow in the <code class="inline"><span class="i">%ENV</span></code>
 code on Windows has been fixed
by removing the buffer completely since it was superfluous anyway.
<a href="https://rt.perl.org/Public/Bug/Display.html?id=131665">[perl #131665]</a></p>
<a name="Default-Hash-Function-Change"></a><h2>Default Hash Function Change</h2>
<p>Perl 5.28.0 retires various older hash functions which are not viewed as
sufficiently secure for use in Perl. We now support four general purpose
hash functions, Siphash (2-4 and 1-3 variants), and  Zaphod32, and StadtX
hash. In addition we support SBOX32 (a form of tabular hashing) for hashing
short strings, in conjunction with any of the other hash functions provided.</p>
<p>By default Perl is configured to support SBOX hashing of strings up to 24
characters, in conjunction with StadtX hashing on 64 bit builds, and
Zaphod32 hashing for 32 bit builds.</p>
<p>You may control these settings with the following options to Configure:</p>
<pre class="verbatim"><ol><li>    -<span class="w">DPERL_HASH_FUNC_SIPHASH</span></li><li>    -<span class="w">DPERL_HASH_FUNC_SIPHASH13</span></li><li>    -<span class="w">DPERL_HASH_FUNC_STADTX</span></li><li>    -<span class="w">DPERL_HASH_FUNC_ZAPHOD32</span></li></ol></pre><p>To disable SBOX hashing you can use</p>
<pre class="verbatim"><ol><li>    -<span class="w">DPERL_HASH_USE_SBOX32_ALSO</span>=<span class="n">0</span></li></ol></pre><p>And to set the maximum length to use SBOX32 hashing on with:</p>
<pre class="verbatim"><ol><li>    -<span class="w">DSBOX32_MAX_LEN</span>=<span class="n">16</span></li></ol></pre><p>The maximum length allowed is 256. There probably isn't much point
in setting it higher than the default.</p>
<a name="Incompatible-Changes"></a><h1>Incompatible Changes</h1>
<a name="Subroutine-attribute-and-signature-order"></a><h2>Subroutine attribute and signature order</h2>
<p>The experimental subroutine signatures feature has been changed so that
subroutine attributes must now come before the signature rather than
after. This is because attributes like <code class="inline"><span class="j">:</span><span class="w">lvalue</span></code>
 can affect the
compilation of code within the signature, for example:</p>
<pre class="verbatim"><ol><li><a name="f"></a>    sub <span class="m">f</span> <span class="co">:</span><span class="q">lvalue ($a = do { $x = &quot;abc&quot;; return substr($x,0,1)})</span> <span class="s">{</span> ...<span class="s">}</span></li></ol></pre><p>Note that this the second time they have been flipped:</p>
<pre class="verbatim"><ol><li><a name="f"></a>    sub <span class="m">f</span> <span class="co">:</span><span class="q">lvalue ($a, $b)</span> <span class="s">{</span> ... <span class="s">}</span><span class="sc">;</span> <span class="c"># 5.20; 5.28 onwards</span></li><li><a name="f-1"></a>    sub <span class="m">f ($a, $b)</span> <span class="co">:</span><span class="w">lvalue</span> <span class="s">{</span> ... <span class="s">}</span><span class="sc">;</span> <span class="c"># 5.22 - 5.26</span></li></ol></pre><a name="Comma-less-variable-lists-in-formats-are-no-longer-allowed"></a><h2>Comma-less variable lists in formats are no longer allowed</h2>
<p>Omitting the commas between variables passed to formats is no longer
allowed.  This has been deprecated since Perl 5.000.</p>
<a name="The-%3alocked-and-%3aunique-attributes-have-been-removed"></a><h2>The <code class="inline"><span class="j">:</span><span class="w">locked</span></code>
 and <code class="inline"><span class="j">:</span><span class="w">unique</span></code>
 attributes have been removed</h2>
<p>These have been no-ops and deprecated since Perl 5.12 and 5.10,
respectively.</p>
<a name="%5cN%7b%7d-with-nothing-between-the-braces-is-now-illegal"></a><h2><code class="inline">\<span class="w">N</span><span class="s">{</span><span class="s">}</span></code>
 with nothing between the braces is now illegal</h2>
<p>This has been deprecated since Perl 5.24.</p>
<a name="Opening-the-same-symbol-as-both-a-file-and-directory-handle-is-no-longer-allowed"></a><h2>Opening the same symbol as both a file and directory handle is no longer allowed</h2>
<p>Using <code class="inline"><a class="l_k" href="functions/open.html">open()</a></code> and <code class="inline"><a class="l_k" href="functions/opendir.html">opendir()</a></code> to associate both a filehandle and a dirhandle
to the same symbol (glob or scalar) has been deprecated since Perl 5.10.</p>
<a name="Use-of-bare-%3c%3c-to-mean-%3c%3c%22%22-is-no-longer-allowed"></a><h2>Use of bare <code class="inline">&lt;&lt;</code>
 to mean <code class="inline"><span class="h">&lt;&lt;&quot;&quot;</span></code>
 is no longer allowed</h2>
<p>Use of a bare terminator has been deprecated since Perl 5.000.</p>
<a name="Setting-%24%2f-to-a-reference-to-a-non-positive-integer-no-longer-allowed"></a><h2>Setting $/ to a reference to a non-positive integer no longer allowed</h2>
<p>This used to work like setting it to <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code>, but has been deprecated
since Perl 5.20.</p>
<a name="Unicode-code-points-with-values-exceeding-IV_MAX-are-now-fatal"></a><h2>Unicode code points with values exceeding <code class="inline"><span class="w">IV_MAX</span></code>
 are now fatal</h2>
<p>This was deprecated since Perl 5.24.</p>
<a name="The-B%3a%3aOP%3a%3aterse-method-has-been-removed"></a><h2>The <code class="inline"><span class="w">B::OP::terse</span></code>
 method has been removed</h2>
<p>Use <code class="inline"><span class="w">B::Concise::b_terse</span></code>
 instead.</p>
<a name="Use-of-inherited-AUTOLOAD-for-non-methods-is-no-longer-allowed"></a><h2>Use of inherited AUTOLOAD for non-methods is no longer allowed</h2>
<p>This was deprecated in Perl 5.004.</p>
<a name="Use-of-strings-with-code-points-over-0xFF-is-not-allowed-for-bitwise-string-operators"></a><h2>Use of strings with code points over 0xFF is not allowed for bitwise string operators</h2>
<p>Code points over <code class="inline"><span class="n">0xFF</span></code>
 do not make sense for bitwise operators and such
an operation will now croak, except for a few remaining cases. See
<a href="perldeprecation.html">perldeprecation</a>.</p>
<p>This was deprecated in Perl 5.24.</p>
<a name="Setting-%24%7b%5eENCODING%7d-to-a-defined-value-is-now-illegal"></a><h2>Setting <code class="inline"><span class="i">$</span>{<span class="w">^ENCODING</span>}</code>
 to a defined value is now illegal</h2>
<p>This has been deprecated since Perl 5.22 and a no-op since Perl 5.26.</p>
<a name="Backslash-no-longer-escapes-colon-in-PATH-for-the--S-switch"></a><h2>Backslash no longer escapes colon in PATH for the <code class="inline">-S</code>
 switch</h2>
<p>Previously the <code class="inline">-S</code>
 switch incorrectly treated backslash ("\") as an
escape for colon when traversing the <code class="inline"><span class="w">PATH</span></code>
 environment variable.
<a href="https://rt.perl.org/Ticket/Display.html?id=129183">[perl #129183]</a></p>
<a name="the--DH-(DEBUG_H)-misfeature-has-been-removed"></a><h2>the -DH (DEBUG_H) misfeature has been removed</h2>
<p>On a perl built with debugging support, the <code class="inline"><span class="w">H</span></code>
 flag to the <code class="inline">-<span class="w">D</span></code>

debugging option has been removed. This was supposed to dump hash values,
but has been broken for many years.</p>
<a name="Yada-yada-is-now-strictly-a-statement"></a><h2>Yada-yada is now strictly a statement</h2>
<p>By the time of its initial stable release in Perl 5.12, the <code class="inline">...</code>

(yada-yada) operator was explicitly intended to serve as a statement,
not an expression.  However, the original implementation was confused
on this point, leading to inconsistent parsing.  The operator was
accidentally accepted in a few situations where it did not serve as a
complete statement, such as</p>
<pre class="verbatim"><ol><li>    ... . <span class="q">&quot;foo&quot;</span><span class="sc">;</span></li><li>    ... <a class="l_k" href="functions/if.html">if</a> <span class="i">$a</span> &lt; <span class="i">$b</span><span class="sc">;</span></li></ol></pre><p>The parsing has now been made consistent, permitting yada-yada only as
a statement.  Affected code can use <code class="inline"><a class="l_k" href="functions/do.html">do{...}</a></code> to put a yada-yada into
an arbitrary expression context.</p>
<a name="Sort-algorithm-can-no-longer-be-specified"></a><h2>Sort algorithm can no longer be specified</h2>
<p>Since Perl 5.8, the <a href="sort.html">sort</a> pragma has had subpragmata <code class="inline"><span class="w">_mergesort</span></code>
,
<code class="inline"><span class="w">_quicksort</span></code>
, and <code class="inline"><span class="w">_qsort</span></code>
 that can be used to specify which algorithm
perl should use to implement the <a href="functions/sort.html">sort</a> builtin.
This was always considered a dubious feature that might not last,
hence the underscore spellings, and they were documented as not being
portable beyond Perl 5.8.  These subpragmata have now been deleted,
and any attempt to use them is an error.  The <a href="sort.html">sort</a> pragma otherwise
remains, and the algorithm-neutral <code class="inline"><span class="w">stable</span></code>
 subpragma can be used to
control sorting behaviour.
<a href="https://rt.perl.org/Ticket/Display.html?id=119635">[perl #119635]</a></p>
<a name="Over-radix-digits-in-floating-point-literals"></a><h2>Over-radix digits in floating point literals</h2>
<p>Octal and binary floating point literals used to permit any hexadecimal
digit to appear after the radix point.  The digits are now restricted
to those appropriate for the radix, as digits before the radix point
always were.</p>
<a name="Return-type-of-unpackstring()"></a><h2>Return type of <code class="inline"><span class="i">unpackstring</span><span class="s">(</span><span class="s">)</span></code>
</h2>
<p>The return types of the C API functions <code class="inline"><span class="i">unpackstring</span><span class="s">(</span><span class="s">)</span></code>
 and
<code class="inline"><span class="i">unpack_str</span><span class="s">(</span><span class="s">)</span></code>
 have changed from <code class="inline"><span class="w">I32</span></code>
 to <code class="inline"><span class="w">SSize_t</span></code>
, in order to
accommodate datasets of more than two billion items.</p>
<a name="Deprecations"></a><h1>Deprecations</h1>
<a name="Use-of-perlfunc%2fvec-EXPR%2cOFFSET%2cBITS-on-strings-with-code-points-above-0xFF-is-deprecated"></a><h2>Use of <a href="functions/vec.html">vec EXPR,OFFSET,BITS</a> on strings with code points above 0xFF is deprecated</h2>
<p>Such strings are represented internally in UTF-8, and <code class="inline"><a class="l_k" href="functions/vec.html">vec</a></code> is a
bit-oriented operation that will likely give unexpected results on those
strings.</p>
<a name="Some-uses-of-unescaped-%22%7b%22-in-regexes-are-no-longer-fatal"></a><h2>Some uses of unescaped <code class="inline"><span class="q">&quot;{&quot;</span></code>
 in regexes are no longer fatal</h2>
<p>Perl 5.26.0 fatalized some uses of an unescaped left brace, but an
exception was made at the last minute, specifically crafted to be a
minimal change to allow GNU Autoconf to work.  That tool is heavily
depended upon, and continues to use the deprecated usage.  Its use of an
unescaped left brace is one where we have no intention of repurposing
<code class="inline"><span class="q">&quot;{&quot;</span></code>
 to be something other than itself.</p>
<p>That exception is now generalized to include various other such cases
where the <code class="inline"><span class="q">&quot;{&quot;</span></code>
 will not be repurposed.</p>
<p>Note that these uses continue to raise a deprecation message.</p>
<a name="Use-of-unescaped-%22%7b%22-immediately-after-a-%22(%22-in-regular-expression-patterns-is-deprecated"></a><h2>Use of unescaped <code class="inline"><span class="q">&quot;{&quot;</span></code>
 immediately after a <code class="inline"><span class="q">&quot;(&quot;</span></code>
 in regular expression patterns is deprecated</h2>
<p>Using unescaped left braces is officially deprecated everywhere, but it
is not enforced in contexts where their use does not interfere with
expected extensions to the language.  A deprecation is added in this
release when the brace appears immediately after an opening parenthesis.
Before this, even if the brace was part of a legal quantifier, it was
not interpreted as such, but as the literal characters, unlike other
quantifiers that follow a <code class="inline"><span class="q">&quot;(&quot;</span></code>
 which are considered errors.  Now,
their use will raise a deprecation message, unless turned off.</p>
<a name="Assignment-to-%24%5b-will-be-fatal-in-Perl-5.30"></a><h2>Assignment to <code class="inline"><span class="i">$[</span></code>
 will be fatal in Perl 5.30</h2>
<p>Assigning a non-zero value to <a href="perlvar.html#%24%5b">$[ </a> has been deprecated
since Perl 5.12, but was never given a deadline for removal.  This has
now been scheduled for Perl 5.30.</p>
<a name="hostname()-won't-accept-arguments-in-Perl-5.32"></a><h2>hostname() won't accept arguments in Perl 5.32</h2>
<p>Passing arguments to <code class="inline"><span class="i">Sys::Hostname::hostname</span><span class="s">(</span><span class="s">)</span></code>
 was already deprecated,
but didn't have a removal date.  This has now been scheduled for Perl
5.32.  <a href="https://rt.perl.org/Ticket/Display.html?id=124349">[perl #124349]</a></p>
<a name="Module-removals"></a><h2>Module removals</h2>
<p>The following modules will be removed from the core distribution in a
future release, and will at that time need to be installed from CPAN.
Distributions on CPAN which require these modules will need to list them as
prerequisites.</p>
<p>The core versions of these modules will now issue <code class="inline"><span class="q">&quot;deprecated&quot;</span></code>
-category
warnings to alert you to this fact.  To silence these deprecation warnings,
install the modules in question from CPAN.</p>
<p>Note that these are (with rare exceptions) fine modules that you are encouraged
to continue to use.  Their disinclusion from core primarily hinges on their
necessity to bootstrapping a fully functional, CPAN-capable Perl installation,
not usually on concerns over their design.</p>
<ul>
<li><a name="B%3a%3aDebug"></a><b>B::Debug</b>
</li>
<li><a name="the-Locale%3a%3aCodes-manpage-and-its-associated-Country%2c-Currency-and-Language-modules"></a><b><a href="Locale/Codes.html">Locale::Codes</a> and its associated Country, Currency and Language modules</b>
</li>
</ul>
<a name="Performance-Enhancements"></a><h1>Performance Enhancements</h1>
<ul>
<li>
<p>The start up overhead for creating regular expression patterns with
Unicode properties (<code class="inline">\<span class="i">p</span><span class="s">{</span>...<span class="s">}</span></code>
) has been greatly reduced in most cases.</p>
</li>
<li>
<p>Many string concatenation expressions are now considerably faster, due
to the introduction internally of a <code class="inline"><span class="w">multiconcat</span></code>
 opcode which combines
multiple concatenations, and optionally a <code class="inline">=</code>
 or <code class="inline">.=</code>
, into a single
action. For example, apart from retrieving <code class="inline"><span class="i">$s</span></code>
, <code class="inline"><span class="i">$a</span></code>
 and <code class="inline"><span class="i">$b</span></code>
, this
whole expression is now handled as a single op:</p>
<pre class="verbatim"><ol><li>    <span class="i">$s</span> .= <span class="q">&quot;a=$a b=$b\n&quot;</span></li></ol></pre><p>As a special case, if the LHS of an assignment is a lexical variable or
<code class="inline"><a class="l_k" href="functions/my.html">my</a> <span class="i">$s</span></code>
, the op itself handles retrieving the lexical variable, which
is faster.</p>
<p>In general, the more the expression includes a mix of constant strings and
variable expressions, the longer the expression, and the more it mixes
together non-utf8 and utf8 strings, the more marked the performance
improvement. For example on a <code class="inline"><span class="w">x86_64</span></code>
 system, this code has been
benchmarked running four times faster:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$s</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$a</span> = <span class="q">&quot;ab\x{100}cde&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$b</span> = <span class="q">&quot;fghij&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$c</span> = <span class="q">&quot;\x{101}klmn&quot;</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/for.html">for</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">$i</span> <span class="s">(</span><span class="n">1</span>..<span class="n">10_000_000</span><span class="s">)</span> <span class="s">{</span></li><li>        <span class="i">$s</span> = <span class="q">&quot;\x{100}wxyz&quot;</span><span class="sc">;</span></li><li>        <span class="i">$s</span> .= <span class="q">&quot;foo=$a bar=$b baz=$c&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>In addition, <code class="inline"><a class="l_k" href="functions/sprintf.html">sprintf</a></code> expressions which have a constant format
containing only <code class="inline"><span class="i">%s</span></code>
 and <code class="inline"><span class="i">%%</span></code>
 format elements, and which have a fixed
number of arguments, are now also optimised into a <code class="inline"><span class="w">multiconcat</span></code>
 op.</p>
</li>
<li>
<p>The <code class="inline"><a class="l_k" href="functions/ref.html">ref()</a></code> builtin is now much faster in boolean context, since it no
longer bothers to construct a temporary string like <code class="inline"><span class="w">Foo</span>=<span class="i">ARRAY</span><span class="s">(</span><span class="n">0x134af48</span><span class="s">)</span></code>
.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/keys.html">keys()</a></code> in void and scalar contexts is now more efficient.</p>
</li>
<li>
<p>The common idiom of comparing the result of index() with -1 is now
specifically optimised,  e.g.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/if.html">if</a> <span class="s">(</span><a class="l_k" href="functions/index.html">index</a><span class="s">(</span>...<span class="s">)</span> != <span class="n">-1</span><span class="s">)</span> <span class="s">{</span> ... <span class="s">}</span></li></ol></pre></li>
<li>
<p><code class="inline"><a class="l_k" href="functions/for.html">for()</a></code> loops and similar constructs are now more efficient in most cases.</p>
</li>
<li>
<p><a href="File/Glob.html">File::Glob</a> has been modified to remove unnecessary backtracking and
recursion, thanks to Russ Cox. See <a href="https://research.swtch.com/glob">https://research.swtch.com/glob</a>
for more details.</p>
</li>
<li>
<p>The XS-level <code class="inline"><span class="i">SvTRUE</span><span class="s">(</span><span class="s">)</span></code>
 API function is now more efficient.</p>
</li>
<li>
<p>Various integer-returning ops are now more efficient in scalar/boolean context.</p>
</li>
<li>
<p>Slightly improved performance when parsing stash names.
<a href="https://rt.perl.org/Public/Bug/Display.html?id=129990">[perl #129990]</a></p>
</li>
<li>
<p>Calls to <code class="inline"><a class="l_k" href="functions/require.html">require</a></code> for an already loaded module are now slightly faster.
<a href="https://rt.perl.org/Public/Bug/Display.html?id=132171">[perl #132171]</a></p>
</li>
<li>
<p>The performance of pattern matching <code class="inline"><span class="s">[</span><span class="s">[</span><span class="co">:</span><span class="w">ascii</span><span class="co">:</span><span class="s">]</span><span class="s">]</span></code>
 and <code class="inline"><span class="s">[</span><span class="s">[</span><span class="co">:</span>^<span class="w">ascii</span><span class="co">:</span><span class="s">]</span><span class="s">]</span></code>

has been improved significantly except on EBCDIC platforms.</p>
</li>
<li>
<p>Various optimizations have been applied to matching regular expression
patterns, so under the right circumstances, significant performance
gains may be noticed.  But in an application with many varied patterns,
little overall improvement likely will be seen.</p>
</li>
<li>
<p>Other optimizations have been applied to UTF-8 handling, but these are
not typically a major factor in most applications.</p>
</li>
</ul>
<a name="Modules-and-Pragmata"></a><h1>Modules and Pragmata</h1>
<p>Key highlights in this release across several modules:</p>
<a name="Removal-of-use-vars"></a><h2>Removal of use vars</h2>
<p>The usage of <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">vars</span></code>
 has been discouraged since the introduction of
<code class="inline"><a class="l_k" href="functions/our.html">our</a></code> in Perl 5.6.0. Where possible the usage of this pragma has now been
removed from the Perl source code.</p>
<p>This had a slight effect (for the better) on the output of WARNING_BITS in
<a href="B/Deparse.html">B::Deparse</a>.</p>
<a name="Use-of-DynaLoader-changed-to-XSLoader-in-many-modules"></a><h2>Use of DynaLoader changed to XSLoader in many modules</h2>
<p>XSLoader is more modern, and most modules already require perl 5.6 or
greater, so no functionality is lost by switching. In some cases, we have
also made changes to the local implementation that may not be reflected in
the version on CPAN due to a desire to maintain more backwards
compatibility.</p>
<a name="Updated-Modules-and-Pragmata"></a><h2>Updated Modules and Pragmata</h2>
<ul>
<li>
<p><a href="Archive/Tar.html">Archive::Tar</a> has been upgraded from version 2.24 to 2.30.</p>
<p>This update also handled CVE-2018-12015: directory traversal
vulnerability.
<a href="https://rt.cpan.org/Ticket/Display.html?id=125523">[cpan #125523]</a></p>
</li>
<li>
<p><a href="arybase.html">arybase</a> has been upgraded from version 0.12 to 0.15.</p>
</li>
<li>
<p><a href="Attribute/Handlers.html">Attribute::Handlers</a> has been upgraded from version 0.99 to 1.01.</p>
</li>
<li>
<p><a href="attributes.html">attributes</a> has been upgraded from version 0.29 to 0.33.</p>
</li>
<li>
<p><a href="B.html">B</a> has been upgraded from version 1.68 to 1.74.</p>
</li>
<li>
<p><a href="B/Concise.html">B::Concise</a> has been upgraded from version 0.999 to 1.003.</p>
</li>
<li>
<p><a href="B/Debug.html">B::Debug</a> has been upgraded from version 1.24 to 1.26.</p>
<p>NOTE: <a href="B/Debug.html">B::Debug</a> is deprecated and may be removed from a future version
of Perl.</p>
</li>
<li>
<p><a href="B/Deparse.html">B::Deparse</a> has been upgraded from version 1.40 to 1.48.</p>
<p>It includes many bug fixes, and in particular, it now deparses variable
attributes correctly:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$x</span> <span class="co">:</span><span class="w">foo</span><span class="sc">;</span>  <span class="c"># used to deparse as</span></li><li>                 <span class="c"># &#39;attributes&#39;-&gt;import(&#39;main&#39;, \$x, &#39;foo&#39;), my $x;</span></li></ol></pre></li>
<li>
<p><a href="base.html">base</a> has been upgraded from version 2.25 to 2.27.</p>
</li>
<li>
<p><a href="bignum.html">bignum</a> has been upgraded from version 0.47 to 0.49.</p>
</li>
<li>
<p><a href="blib.html">blib</a> has been upgraded from version 1.06 to 1.07.</p>
</li>
<li>
<p><a href="bytes.html">bytes</a> has been upgraded from version 1.05 to 1.06.</p>
</li>
<li>
<p><a href="Carp.html">Carp</a> has been upgraded from version 1.42 to 1.50.</p>
<p>If a package on the call stack contains a constant named <code class="inline"><span class="w">ISA</span></code>
, Carp no
longer throws a "Not a GLOB reference" error.</p>
<p><a href="Carp.html">Carp</a>, when generating stack traces, now attempts to work around
longstanding bugs resulting from Perl's non-reference-counted stack.
<a href="https://rt.perl.org/Ticket/Display.html?id=52610">[perl #52610]</a></p>
<p>Carp has been modified to avoid assuming that objects cannot be
overloaded without the <a href="overload.html">overload</a> module loaded (this can happen with
objects created by XS modules).  Previously, infinite recursion would
result if an XS-defined overload method itself called Carp.
<a href="https://rt.perl.org/Ticket/Display.html?id=132828">[perl #132828]</a></p>
<p>Carp now avoids using <code class="inline"><span class="w">overload::StrVal</span></code>
, partly because older versions
of <a href="overload.html">overload</a> (included with perl 5.14 and earlier) load <a href="Scalar/Util.html">Scalar::Util</a>
at run time, which will fail if Carp has been invoked after a syntax error.</p>
</li>
<li>
<p><a href="charnames.html">charnames</a> has been upgraded from version 1.44 to 1.45.</p>
</li>
<li>
<p><a href="Compress/Raw/Zlib.html">Compress::Raw::Zlib</a> has been upgraded from version 2.074 to 2.076.</p>
<p>This addresses a security vulnerability in older versions of the 'zlib' library
(which is bundled with Compress-Raw-Zlib).</p>
</li>
<li>
<p><a href="Config/Extensions.html">Config::Extensions</a> has been upgraded from version 0.01 to 0.02.</p>
</li>
<li>
<p><a href="Config/Perl/V.html">Config::Perl::V</a> has been upgraded from version 0.28 to 0.29.</p>
</li>
<li>
<p><a href="CPAN.html">CPAN</a> has been upgraded from version 2.18 to 2.20.</p>
</li>
<li>
<p><a href="Data/Dumper.html">Data::Dumper</a> has been upgraded from version 2.167 to 2.170.</p>
<p>Quoting of glob names now obeys the Useqq option
<a href="https://rt.perl.org/Ticket/Display.html?id=119831">[perl #119831]</a>.</p>
<p>Attempts to set an option to <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> through a combined getter/setter
method are no longer mistaken for getter calls
<a href="https://rt.perl.org/Ticket/Display.html?id=113090">[perl #113090]</a>.</p>
</li>
<li>
<p><a href="Devel/Peek.html">Devel::Peek</a> has been upgraded from version 1.26 to 1.27.</p>
</li>
<li>
<p><a href="Devel/PPPort.html">Devel::PPPort</a> has been upgraded from version 3.35 to 3.40.</p>
<p><a href="Devel/PPPort.html">Devel::PPPort</a> has moved from cpan-first to perl-first maintenance</p>
<p>Primary responsibility for the code in Devel::PPPort has moved into core perl.
In a practical sense there should be no change except that hopefully it will
stay more up to date with changes made to symbols in perl, rather than needing
to be updated after the fact.</p>
</li>
<li>
<p><a href="Digest/SHA.html">Digest::SHA</a> has been upgraded from version 5.96 to 6.01.</p>
</li>
<li>
<p><a href="DirHandle.html">DirHandle</a> has been upgraded from version 1.04 to 1.05.</p>
</li>
<li>
<p><a href="DynaLoader.html">DynaLoader</a> has been upgraded from version 1.42 to 1.45.</p>
<p>Its documentation now shows the use of <code class="inline"><a class="l_k" href="functions/__PACKAGE__.html">__PACKAGE__</a></code> and direct object
syntax
<a href="https://rt.perl.org/Ticket/Display.html?id=132247">[perl #132247]</a>.</p>
</li>
<li>
<p><a href="Encode.html">Encode</a> has been upgraded from version 2.88 to 2.97.</p>
</li>
<li>
<p><a href="encoding.html">encoding</a> has been upgraded from version 2.19 to 2.22.</p>
</li>
<li>
<p><a href="Errno.html">Errno</a> has been upgraded from version 1.28 to 1.29.</p>
</li>
<li>
<p><a href="experimental.html">experimental</a> has been upgraded from version 0.016 to 0.019.</p>
</li>
<li>
<p><a href="Exporter.html">Exporter</a> has been upgraded from version 5.72 to 5.73.</p>
</li>
<li>
<p><a href="ExtUtils/CBuilder.html">ExtUtils::CBuilder</a> has been upgraded from version 0.280225 to 0.280230.</p>
</li>
<li>
<p><a href="ExtUtils/Constant.html">ExtUtils::Constant</a> has been upgraded from version 0.23 to 0.25.</p>
</li>
<li>
<p><a href="ExtUtils/Embed.html">ExtUtils::Embed</a> has been upgraded from version 1.34 to 1.35.</p>
</li>
<li>
<p><a href="ExtUtils/Install.html">ExtUtils::Install</a> has been upgraded from version 2.04 to 2.14.</p>
</li>
<li>
<p><a href="ExtUtils/MakeMaker.html">ExtUtils::MakeMaker</a> has been upgraded from version 7.24 to 7.34.</p>
</li>
<li>
<p><a href="ExtUtils/Miniperl.html">ExtUtils::Miniperl</a> has been upgraded from version 1.06 to 1.08.</p>
</li>
<li>
<p><a href="ExtUtils/ParseXS.html">ExtUtils::ParseXS</a> has been upgraded from version 3.34 to 3.39.</p>
</li>
<li>
<p><a href="ExtUtils/Typemaps.html">ExtUtils::Typemaps</a> has been upgraded from version 3.34 to 3.38.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/ExtUtils::XSSymSet">ExtUtils::XSSymSet</a> has been upgraded from version 1.3 to 1.4.</p>
</li>
<li>
<p><a href="feature.html">feature</a> has been upgraded from version 1.47 to 1.52.</p>
</li>
<li>
<p><a href="fields.html">fields</a> has been upgraded from version 2.23 to 2.24.</p>
</li>
<li>
<p><a href="File/Copy.html">File::Copy</a> has been upgraded from version 2.32 to 2.33.</p>
<p>It will now use the sub-second precision variant of utime() supplied by
<a href="Time/HiRes.html">Time::HiRes</a> where available.
<a href="https://rt.perl.org/Ticket/Display.html?id=132401">[perl #132401]</a>.</p>
</li>
<li>
<p><a href="File/Fetch.html">File::Fetch</a> has been upgraded from version 0.52 to 0.56.</p>
</li>
<li>
<p><a href="File/Glob.html">File::Glob</a> has been upgraded from version 1.28 to 1.31.</p>
</li>
<li>
<p><a href="File/Path.html">File::Path</a> has been upgraded from version 2.12_01 to 2.15.</p>
</li>
<li>
<p><a href="File/Spec.html">File::Spec</a> and <a href="Cwd.html">Cwd</a> have been upgraded from version 3.67 to 3.74.</p>
</li>
<li>
<p><a href="File/stat.html">File::stat</a> has been upgraded from version 1.07 to 1.08.</p>
</li>
<li>
<p><a href="FileCache.html">FileCache</a> has been upgraded from version 1.09 to 1.10.</p>
</li>
<li>
<p><a href="Filter/Simple.html">Filter::Simple</a> has been upgraded from version 0.93 to 0.95.</p>
</li>
<li>
<p><a href="Filter/Util/Call.html">Filter::Util::Call</a> has been upgraded from version 1.55 to 1.58.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/GDBM_File">GDBM_File</a> has been upgraded from version 1.15 to 1.17.</p>
<p>Its documentation now explains that <code class="inline"><a class="l_k" href="functions/each.html">each</a></code> and <code class="inline"><a class="l_k" href="functions/delete.html">delete</a></code> don't mix in
hashes tied to this module
<a href="https://rt.perl.org/Ticket/Display.html?id=117449">[perl #117449]</a>.</p>
<p>It will now retry opening with an acceptable block size if asking gdbm
to default the block size failed
<a href="https://rt.perl.org/Ticket/Display.html?id=119623">[perl #119623]</a>.</p>
</li>
<li>
<p><a href="Getopt/Long.html">Getopt::Long</a> has been upgraded from version 2.49 to 2.5.</p>
</li>
<li>
<p><a href="Hash/Util/FieldHash.html">Hash::Util::FieldHash</a> has been upgraded from version 1.19 to 1.20.</p>
</li>
<li>
<p><a href="I18N/Langinfo.html">I18N::Langinfo</a> has been upgraded from version 0.13 to 0.17.</p>
<p>This module is now available on all platforms, emulating the system
<i>nl_langinfo(3)</i> on systems that lack it.  Some caveats apply, as
<a href="I18N/Langinfo.html">detailed in its documentation</a>, the most severe being
that, except for MS Windows, the <code class="inline"><span class="w">CODESET</span></code>
 item is not implemented on
those systems, always returning <code class="inline"><span class="q">&quot;&quot;</span></code>
.</p>
<p>It now sets the UTF-8 flag in its returned scalar if the string contains
legal non-ASCII UTF-8, and the locale is UTF-8
<a href="https://rt.perl.org/Ticket/Display.html?id=127288">[perl #127288]</a>.</p>
<p>This update also fixes a bug in which the underlying locale was ignored
for the <code class="inline"><span class="w">RADIXCHAR</span></code>
 (always was returned as a dot) and the <code class="inline"><span class="w">THOUSEP</span></code>

(always empty).  Now the locale-appropriate values are returned.</p>
</li>
<li>
<p><a href="I18N/LangTags.html">I18N::LangTags</a> has been upgraded from version 0.42 to 0.43.</p>
</li>
<li>
<p><a href="if.html">if</a> has been upgraded from version 0.0606 to 0.0608.</p>
</li>
<li>
<p><a href="IO.html">IO</a> has been upgraded from version 1.38 to 1.39.</p>
</li>
<li>
<p><a href="IO/Socket/IP.html">IO::Socket::IP</a> has been upgraded from version 0.38 to 0.39.</p>
</li>
<li>
<p><a href="IPC/Cmd.html">IPC::Cmd</a> has been upgraded from version 0.96 to 1.00.</p>
</li>
<li>
<p><a href="JSON/PP.html">JSON::PP</a> has been upgraded from version 2.27400_02 to 2.97001.</p>
</li>
<li>
<p>The <code class="inline"><span class="w">libnet</span></code>
 distribution has been upgraded from version 3.10 to 3.11.</p>
</li>
<li>
<p><a href="List/Util.html">List::Util</a> has been upgraded from version 1.46_02 to 1.49.</p>
</li>
<li>
<p><a href="Locale/Codes.html">Locale::Codes</a> has been upgraded from version 3.42 to 3.56.</p>
<p><b>NOTE</b>: <a href="Locale/Codes.html">Locale::Codes</a> scheduled to be removed from core in Perl 5.30.</p>
</li>
<li>
<p><a href="Locale/Maketext.html">Locale::Maketext</a> has been upgraded from version 1.28 to 1.29.</p>
</li>
<li>
<p><a href="Math/BigInt.html">Math::BigInt</a> has been upgraded from version 1.999806 to 1.999811.</p>
</li>
<li>
<p><a href="Math/BigInt/FastCalc.html">Math::BigInt::FastCalc</a> has been upgraded from version 0.5005 to 0.5006.</p>
</li>
<li>
<p><a href="Math/BigRat.html">Math::BigRat</a> has been upgraded from version 0.2611 to 0.2613.</p>
</li>
<li>
<p><a href="Module/CoreList.html">Module::CoreList</a> has been upgraded from version 5.20170530 to 5.20180622.</p>
</li>
<li>
<p><a href="mro.html">mro</a> has been upgraded from version 1.20 to 1.22.</p>
</li>
<li>
<p><a href="Net/Ping.html">Net::Ping</a> has been upgraded from version 2.55 to 2.62.</p>
</li>
<li>
<p><a href="NEXT.html">NEXT</a> has been upgraded from version 0.67 to 0.67_01.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/ODBM_File">ODBM_File</a> has been upgraded from version 1.14 to 1.15.</p>
</li>
<li>
<p><a href="Opcode.html">Opcode</a> has been upgraded from version 1.39 to 1.43.</p>
</li>
<li>
<p><a href="overload.html">overload</a> has been upgraded from version 1.28 to 1.30.</p>
</li>
<li>
<p><a href="PerlIO/encoding.html">PerlIO::encoding</a> has been upgraded from version 0.25 to 0.26.</p>
</li>
<li>
<p><a href="PerlIO/scalar.html">PerlIO::scalar</a> has been upgraded from version 0.26 to 0.29.</p>
</li>
<li>
<p><a href="PerlIO/via.html">PerlIO::via</a> has been upgraded from version 0.16 to 0.17.</p>
</li>
<li>
<p><a href="Pod/Functions.html">Pod::Functions</a> has been upgraded from version 1.11 to 1.13.</p>
</li>
<li>
<p><a href="Pod/Html.html">Pod::Html</a> has been upgraded from version 1.2202 to 1.24.</p>
<p>A title for the HTML document will now be automatically generated by
default from a "NAME" section in the POD document, as it used to be
before the module was rewritten to use <a href="Pod/Simple/XHTML.html">Pod::Simple::XHTML</a> to do the
core of its job
<a href="https://rt.perl.org/Ticket/Display.html?id=110520">[perl #110520]</a>.</p>
</li>
<li>
<p><a href="Pod/Perldoc.html">Pod::Perldoc</a> has been upgraded from version 3.28 to 3.2801.</p>
</li>
<li>
<p>The <code class="inline"><span class="w">podlators</span></code>
 distribution has been upgraded from version 4.09 to 4.10.</p>
<p>Man page references and function names now follow the Linux man page
formatting standards, instead of the Solaris standard.</p>
</li>
<li>
<p><a href="POSIX.html">POSIX</a> has been upgraded from version 1.76 to 1.84.</p>
<p>Some more cautions were added about using locale-specific functions in
threaded applications.</p>
</li>
<li>
<p><a href="re.html">re</a> has been upgraded from version 0.34 to 0.36.</p>
</li>
<li>
<p><a href="Scalar/Util.html">Scalar::Util</a> has been upgraded from version 1.46_02 to 1.50.</p>
</li>
<li>
<p><a href="SelfLoader.html">SelfLoader</a> has been upgraded from version 1.23 to 1.25.</p>
</li>
<li>
<p><a href="Socket.html">Socket</a> has been upgraded from version 2.020_03 to 2.027.</p>
</li>
<li>
<p><a href="sort.html">sort</a> has been upgraded from version 2.02 to 2.04.</p>
</li>
<li>
<p><a href="Storable.html">Storable</a> has been upgraded from version 2.62 to 3.08.</p>
</li>
<li>
<p><a href="Sub/Util.html">Sub::Util</a> has been upgraded from version 1.48 to 1.49.</p>
</li>
<li>
<p><a href="subs.html">subs</a> has been upgraded from version 1.02 to 1.03.</p>
</li>
<li>
<p><a href="Sys/Hostname.html">Sys::Hostname</a> has been upgraded from version 1.20 to 1.22.</p>
</li>
<li>
<p><a href="Term/ReadLine.html">Term::ReadLine</a> has been upgraded from version 1.16 to 1.17.</p>
</li>
<li>
<p><a href="Test.html">Test</a> has been upgraded from version 1.30 to 1.31.</p>
</li>
<li>
<p><a href="Test/Harness.html">Test::Harness</a> has been upgraded from version 3.38 to 3.42.</p>
</li>
<li>
<p><a href="Test/Simple.html">Test::Simple</a> has been upgraded from version 1.302073 to 1.302133.</p>
</li>
<li>
<p><a href="threads.html">threads</a> has been upgraded from version 2.15 to 2.22.</p>
<p>The documentation now better describes the problems that arise when
returning values from threads, and no longer warns about creating threads
in <code class="inline"><a class="l_k" href="functions/BEGIN.html">BEGIN</a></code> blocks.
<a href="https://rt.perl.org/Ticket/Display.html?id=96538">[perl #96538]</a></p>
</li>
<li>
<p><a href="threads/shared.html">threads::shared</a> has been upgraded from version 1.56 to 1.58.</p>
</li>
<li>
<p><a href="Tie/Array.html">Tie::Array</a> has been upgraded from version 1.06 to 1.07.</p>
</li>
<li>
<p><a href="Tie/StdHandle.html">Tie::StdHandle</a> has been upgraded from version 4.4 to 4.5.</p>
</li>
<li>
<p><a href="Time/gmtime.html">Time::gmtime</a> has been upgraded from version 1.03 to 1.04.</p>
</li>
<li>
<p><a href="Time/HiRes.html">Time::HiRes</a> has been upgraded from version 1.9741 to 1.9759.</p>
</li>
<li>
<p><a href="Time/localtime.html">Time::localtime</a> has been upgraded from version 1.02 to 1.03.</p>
</li>
<li>
<p><a href="Time/Piece.html">Time::Piece</a> has been upgraded from version 1.31 to 1.3204.</p>
</li>
<li>
<p><a href="Unicode/Collate.html">Unicode::Collate</a> has been upgraded from version 1.19 to 1.25.</p>
</li>
<li>
<p><a href="Unicode/Normalize.html">Unicode::Normalize</a> has been upgraded from version 1.25 to 1.26.</p>
</li>
<li>
<p><a href="Unicode/UCD.html">Unicode::UCD</a> has been upgraded from version 0.68 to 0.70.</p>
<p>The function <code class="inline"><span class="w">num</span></code>
 now accepts an optional parameter to help in
diagnosing error returns.</p>
</li>
<li>
<p><a href="User/grent.html">User::grent</a> has been upgraded from version 1.01 to 1.02.</p>
</li>
<li>
<p><a href="User/pwent.html">User::pwent</a> has been upgraded from version 1.00 to 1.01.</p>
</li>
<li>
<p><a href="utf8.html">utf8</a> has been upgraded from version 1.19 to 1.21.</p>
</li>
<li>
<p><a href="vars.html">vars</a> has been upgraded from version 1.03 to 1.04.</p>
</li>
<li>
<p><a href="version.html">version</a> has been upgraded from version 0.9917 to 0.9923.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/VMS::DCLsym">VMS::DCLsym</a> has been upgraded from version 1.08 to 1.09.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/VMS::Stdio">VMS::Stdio</a> has been upgraded from version 2.41 to 2.44.</p>
</li>
<li>
<p><a href="warnings.html">warnings</a> has been upgraded from version 1.37 to 1.42.</p>
<p>It now includes new functions with names ending in <code class="inline"><span class="w">_at_level</span></code>
, allowing
callers to specify the exact call frame.
<a href="https://rt.perl.org/Ticket/Display.html?id=132468">[perl #132468]</a></p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/XS::Typemap">XS::Typemap</a> has been upgraded from version 0.15 to 0.16.</p>
</li>
<li>
<p><a href="XSLoader.html">XSLoader</a> has been upgraded from version 0.27 to 0.30.</p>
<p>Its documentation now shows the use of <code class="inline"><a class="l_k" href="functions/__PACKAGE__.html">__PACKAGE__</a></code>, and direct object
syntax for example <code class="inline"><span class="w">DynaLoader</span></code>
 usage
<a href="https://rt.perl.org/Ticket/Display.html?id=132247">[perl #132247]</a>.</p>
<p>Platforms that use <code class="inline"><span class="w">mod2fname</span></code>
 to edit the names of loadable
libraries now look for bootstrap (.bs) files under the correct,
non-edited name.</p>
</li>
</ul>
<a name="Removed-Modules-and-Pragmata"></a><h2>Removed Modules and Pragmata</h2>
<ul>
<li>
<p>The <code class="inline"><span class="w">VMS::stdio</span></code>
 compatibility shim has been removed.</p>
</li>
</ul>
<a name="Documentation"></a><h1>Documentation</h1>
<a name="Changes-to-Existing-Documentation"></a><h2>Changes to Existing Documentation</h2>
<p>We have attempted to update the documentation to reflect the changes
listed in this document.  If you find any we have missed, send email
to <a href="mailto:perlbug@perl.org">perlbug@perl.org</a>.</p>
<p>Additionally, the following selected changes have been made:</p>
<a name="the-perlapi-manpage"></a><h3><a href="perlapi.html">perlapi</a></h3>
<ul>
<li>
<p>The API functions <code class="inline"><span class="i">perl_parse</span><span class="s">(</span><span class="s">)</span></code>
, <code class="inline"><span class="i">perl_run</span><span class="s">(</span><span class="s">)</span></code>
, and <code class="inline"><span class="i">perl_destruct</span><span class="s">(</span><span class="s">)</span></code>

are now documented comprehensively, where previously the only
documentation was a reference to the <a href="perlembed.html">perlembed</a> tutorial.</p>
</li>
<li>
<p>The documentation of <code class="inline"><span class="i">newGIVENOP</span><span class="s">(</span><span class="s">)</span></code>
 has been belatedly updated to
account for the removal of lexical <code class="inline"><span class="i">$_</span></code>
.</p>
</li>
<li>
<p>The API functions <code class="inline"><span class="i">newCONSTSUB</span><span class="s">(</span><span class="s">)</span></code>
 and <code class="inline"><span class="i">newCONSTSUB_flags</span><span class="s">(</span><span class="s">)</span></code>
 are
documented much more comprehensively than before.</p>
</li>
</ul>
<a name="the-perldata-manpage"></a><h3><a href="perldata.html">perldata</a></h3>
<ul>
<li>
<p>The section "Truth and Falsehood" in <a href="perlsyn.html">perlsyn</a> has been moved into
<a href="perldata.html">perldata</a>.</p>
</li>
</ul>
<a name="the-perldebguts-manpage"></a><h3><a href="perldebguts.html">perldebguts</a></h3>
<ul>
<li>
<p>The description of the conditions under which <code class="inline"><span class="i">DB::sub</span><span class="s">(</span><span class="s">)</span></code>
 will be called
has been clarified.
<a href="https://rt.perl.org/Ticket/Display.html?id=131672">[perl #131672]</a></p>
</li>
</ul>
<a name="the-perldiag-manpage"></a><h3><a href="perldiag.html">perldiag</a></h3>
<ul>
<li><a name="*-the-perldiag%2fVariable-length-lookbehind-not-implemented-in-regex-msol%25ssol-manpage"></a><b><a href="perldiag.html#Variable-length-lookbehind-not-implemented-in-regex-m%2f%25s%2f">Variable length lookbehind not implemented in regex m/%s/ in perldiag</a></b>
<p>This now gives more ideas as to workarounds to the issue that was
introduced in Perl 5.18 (but not documented explicitly in its perldelta)
for the fact that some Unicode <code class="inline"><span class="q">/i</span></code>
 rules cause a few sequences such as</p>
<pre class="verbatim"><ol><li> <span class="s">(</span><span class="q">?&lt;!st)</span></li></ol></pre><p>to be considered variable length, and hence disallowed.</p>
</li>
<li><a name="*-%22Use-of-state-%24_-is-experimental%22-in-the-perldiag-manpage"></a><b>"Use of state $_ is experimental" in <a href="perldiag.html">perldiag</a></b>
<p>This entry has been removed, as the experimental support of this construct was
removed in perl 5.24.0.</p>
</li>
<li>
<p>The diagnostic <code class="inline"><span class="w">Initialization</span> <span class="w">of</span> <span class="w">state</span> <span class="w">variables</span> <span class="w">in</span> <span class="w">list</span> <span class="w">context</span>
<span class="w">currently</span> <span class="w">forbidden</span></code>
 has changed to <code class="inline"><span class="w">Initialization</span> <span class="w">of</span> <span class="w">state</span> <span class="w">variables</span>
<span class="w">in</span> <span class="w">list</span> <span class="w">currently</span> <span class="w">forbidden</span></code>
, because list-context initialization of
single aggregate state variables is now permitted.</p>
</li>
</ul>
<a name="the-perlembed-manpage"></a><h3><a href="perlembed.html">perlembed</a></h3>
<ul>
<li>
<p>The examples in <a href="perlembed.html">perlembed</a> have been made more portable in the way
they exit, and the example that gets an exit code from the embedded Perl
interpreter now gets it from the right place.  The examples that pass
a constructed argv to Perl now show the mandatory null <code class="inline"><span class="w">argv</span><span class="s">[</span><span class="w">argc</span><span class="s">]</span></code>
.</p>
</li>
<li>
<p>An example in <a href="perlembed.html">perlembed</a> used the string value of <code class="inline"><span class="w">ERRSV</span></code>
 as a
format string when calling croak().  If that string contains format
codes such as <code class="inline"><span class="i">%s</span></code>
 this could crash the program.</p>
<p>This has been changed to a call to croak_sv().</p>
<p>An alternative could have been to supply a trivial format string:</p>
<pre class="verbatim"><ol><li>  <span class="i">croak</span><span class="s">(</span><span class="q">&quot;%s&quot;</span><span class="cm">,</span> <span class="i">SvPV_nolen</span><span class="s">(</span><span class="w">ERRSV</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>or as a special case for <code class="inline"><span class="w">ERRSV</span></code>
 simply:</p>
<pre class="verbatim"><ol><li>  <span class="i">croak</span><span class="s">(</span><span class="w">NULL</span><span class="s">)</span><span class="sc">;</span></li></ol></pre></li>
</ul>
<a name="the-perlfunc-manpage"></a><h3><a href="perlfunc.html">perlfunc</a></h3>
<ul>
<li>
<p>There is now a note that warnings generated by built-in functions are
documented in <a href="perldiag.html">perldiag</a> and <a href="warnings.html">warnings</a>.
<a href="https://rt.perl.org/Ticket/Display.html?id=116080">[perl #116080]</a></p>
</li>
<li>
<p>The documentation for the <code class="inline"><a class="l_k" href="functions/exists.html">exists</a></code> operator no longer says that
autovivification behaviour "may be fixed in a future release".
We've determined that we're not going to change the default behaviour.
<a href="https://rt.perl.org/Ticket/Display.html?id=127712">[perl #127712]</a></p>
</li>
<li>
<p>A couple of small details in the documentation for the <code class="inline"><a class="l_k" href="functions/bless.html">bless</a></code> operator
have been clarified.
<a href="https://rt.perl.org/Ticket/Display.html?id=124428">[perl #124428]</a></p>
</li>
<li>
<p>The description of <code class="inline"><span class="i">@INC</span></code>
 hooks in the documentation for <code class="inline"><a class="l_k" href="functions/require.html">require</a></code>
has been corrected to say that filter subroutines receive a useless
first argument.
<a href="https://rt.perl.org/Ticket/Display.html?id=115754">[perl #115754]</a></p>
</li>
<li>
<p>The documentation of <code class="inline"><a class="l_k" href="functions/ref.html">ref</a></code> has been rewritten for clarity.</p>
</li>
<li>
<p>The documentation of <code class="inline"><a class="l_k" href="functions/use.html">use</a></code> now explains what syntactically qualifies
as a version number for its module version checking feature.</p>
</li>
<li>
<p>The documentation of <code class="inline"><a class="l_k" href="functions/warn.html">warn</a></code> has been updated to reflect that since Perl
5.14 it has treated complex exception objects in a manner equivalent
to <code class="inline"><a class="l_k" href="functions/die.html">die</a></code>.
<a href="https://rt.perl.org/Ticket/Display.html?id=121372">[perl #121372]</a></p>
</li>
<li>
<p>The documentation of <code class="inline"><a class="l_k" href="functions/die.html">die</a></code> and <code class="inline"><a class="l_k" href="functions/warn.html">warn</a></code> has been revised for clarity.</p>
</li>
<li>
<p>The documentation of <code class="inline"><a class="l_k" href="functions/each.html">each</a></code> has been improved, with a slightly more
explicit description of the sharing of iterator state, and with
caveats regarding the fragility of while-each loops.
<a href="https://rt.perl.org/Ticket/Display.html?id=132644">[perl #132644]</a></p>
</li>
<li>
<p>Clarification to <code class="inline"><a class="l_k" href="functions/require.html">require</a></code> was added to explain the differences between</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/require.html">require</a> <span class="w">Foo::Bar</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/require.html">require</a> <span class="q">&quot;Foo/Bar.pm&quot;</span><span class="sc">;</span></li></ol></pre></li>
</ul>
<a name="the-perlgit-manpage"></a><h3><a href="perlgit.html">perlgit</a></h3>
<ul>
<li>
<p>The precise rules for identifying <code class="inline"><span class="w">smoke</span>-<span class="w">me</span></code>
 branches are now stated.</p>
</li>
</ul>
<a name="the-perlguts-manpage"></a><h3><a href="perlguts.html">perlguts</a></h3>
<ul>
<li>
<p>The section on reference counting in <a href="perlguts.html">perlguts</a> has been heavily revised,
to describe references in the way a programmer needs to think about them
rather than in terms of the physical data structures.</p>
</li>
<li>
<p>Improve documentation related to UTF-8 multibytes.</p>
</li>
</ul>
<a name="the-perlintern-manpage"></a><h3><a href="perlintern.html">perlintern</a></h3>
<ul>
<li>
<p>The internal functions <code class="inline"><span class="i">newXS_len_flags</span><span class="s">(</span><span class="s">)</span></code>
 and <code class="inline"><span class="i">newATTRSUB_x</span><span class="s">(</span><span class="s">)</span></code>
 are
now documented.</p>
</li>
</ul>
<a name="the-perlobj-manpage"></a><h3><a href="perlobj.html">perlobj</a></h3>
<ul>
<li>
<p>The documentation about <code class="inline"><a class="l_k" href="functions/DESTROY.html">DESTROY</a></code> methods has been corrected, updated,
and revised, especially in regard to how they interact with exceptions.
<a href="https://rt.perl.org/Ticket/Display.html?id=122753">[perl #122753]</a></p>
</li>
</ul>
<a name="the-perlop-manpage"></a><h3><a href="perlop.html">perlop</a></h3>
<ul>
<li>
<p>The description of the <code class="inline"><a class="l_k" href="functions/x.html">x</a></code> operator in <a href="perlop.html">perlop</a> has been clarified.
<a href="https://rt.perl.org/Ticket/Display.html?id=132460">[perl #132460]</a></p>
</li>
<li>
<p><a href="perlop.html">perlop</a> has been updated to note that <code class="inline"><a class="l_k" href="functions/qw.html">qw</a></code>'s whitespace rules differ
from that of <code class="inline"><a class="l_k" href="functions/split.html">split</a></code>'s in that only ASCII whitespace is used.</p>
</li>
<li>
<p>The general explanation of operator precedence and associativity has
been corrected and clarified.
<a href="https://rt.perl.org/Ticket/Display.html?id=127391">[perl #127391]</a></p>
</li>
<li>
<p>The documentation for the <code class="inline">\</code>
 referencing operator now explains the
unusual context that it supplies to its operand.
<a href="https://rt.perl.org/Ticket/Display.html?id=131061">[perl #131061]</a></p>
</li>
</ul>
<a name="the-perlrequick-manpage"></a><h3><a href="perlrequick.html">perlrequick</a></h3>
<ul>
<li>
<p>Clarifications on metacharacters and character classes</p>
</li>
</ul>
<a name="the-perlretut-manpage"></a><h3><a href="perlretut.html">perlretut</a></h3>
<ul>
<li>
<p>Clarify metacharacters.</p>
</li>
</ul>
<a name="the-perlrun-manpage"></a><h3><a href="perlrun.html">perlrun</a></h3>
<ul>
<li>
<p>Clarify the differences between <b>-M</b> and <b>-m</b>.
<a href="https://rt.perl.org/Ticket/Display.html?id=131518">[perl #131518]</a></p>
</li>
</ul>
<a name="the-perlsec-manpage"></a><h3><a href="perlsec.html">perlsec</a></h3>
<ul>
<li>
<p>The documentation about set-id scripts has been updated and revised.
<a href="https://rt.perl.org/Ticket/Display.html?id=74142">[perl #74142]</a></p>
</li>
<li>
<p>A section about using <code class="inline"><span class="w">sudo</span></code>
 to run Perl scripts has been added.</p>
</li>
</ul>
<a name="the-perlsyn-manpage"></a><h3><a href="perlsyn.html">perlsyn</a></h3>
<ul>
<li>
<p>The section "Truth and Falsehood" in <a href="perlsyn.html">perlsyn</a> has been removed from
that document, where it didn't belong, and merged into the existing
paragraph on the same topic in <a href="perldata.html">perldata</a>.</p>
</li>
<li>
<p>The means to disambiguate between code blocks and hash constructors,
already documented in <a href="perlref.html">perlref</a>, are now documented in <a href="perlsyn.html">perlsyn</a> too.
<a href="https://rt.perl.org/Ticket/Display.html?id=130958">[perl #130958]</a></p>
</li>
</ul>
<a name="the-perluniprops-manpage"></a><h3><a href="perluniprops.html">perluniprops</a></h3>
<ul>
<li>
<p><a href="perluniprops.html">perluniprops</a> has been updated to note that <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Word</span><span class="s">}</span></code>
 now includes
code points matching the <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Join_Control</span><span class="s">}</span></code>
 property.  The change to
the property was made in Perl 5.18, but not documented until now.  There
are currently only two code points that match this property U+200C (ZERO
WIDTH NON-JOINER) and U+200D (ZERO WIDTH JOINER).</p>
</li>
<li>
<p>For each binary table or property, the documentation now includes which
characters in the range <code class="inline">\<span class="w">x00</span>-\<span class="w">xFF</span></code>
 it matches, as well as a list of
the first few ranges of code points matched above that.</p>
</li>
</ul>
<a name="the-perlvar-manpage"></a><h3><a href="perlvar.html">perlvar</a></h3>
<ul>
<li>
<p>The entry for <code class="inline"><span class="i">$+</span></code>
 in perlvar has been expanded upon to describe handling of
multiply-named capturing groups.</p>
</li>
</ul>
<a name="the-perlfunc-manpage%2c-the-perlop-manpage%2c-the-perlsyn-manpage"></a><h3><a href="perlfunc.html">perlfunc</a>, <a href="perlop.html">perlop</a>, <a href="perlsyn.html">perlsyn</a></h3>
<ul>
<li>
<p>In various places, improve the documentation of the special cases
in the condition expression of a while loop, such as implicit <code class="inline"><a class="l_k" href="functions/defined.html">defined</a></code>
and assignment to <code class="inline"><span class="i">$_</span></code>
.
<a href="https://rt.perl.org/Ticket/Display.html?id=132644">[perl #132644]</a></p>
</li>
</ul>
<a name="Diagnostics"></a><h1>Diagnostics</h1>
<p>The following additions or changes have been made to diagnostic output,
including warnings and fatal error messages.  For the complete list of
diagnostic messages, see <a href="perldiag.html">perldiag</a>.</p>
<a name="New-Diagnostics"></a><h2>New Diagnostics</h2>
<a name="New-Errors"></a><h3>New Errors</h3>
<ul>
<li>
<p><a href="perldiag.html#Can't-%22goto%22-into-a-%22given%22-block">Can't goto into a given block</a></p>
<p>(F) A "goto" statement was executed to jump into the middle of a <code class="inline"><a class="l_k" href="functions/given.html">given</a></code>
block.  You can't get there from here.  See <a href="functions/goto.html">goto</a>.</p>
</li>
<li>
<p><a href="perldiag.html#Can't-%22goto%22-into-a-binary-or-list-expression">Can't goto into a binary or list expression</a></p>
<p>Use of <code class="inline"><a class="l_k" href="functions/goto.html">goto</a></code> to jump into the parameter of a binary or list operator has
been prohibited, to prevent crashes and stack corruption.
<a href="https://rt.perl.org/Ticket/Display.html?id=130936">[perl #130936]</a></p>
<p>You may only enter the <i>first</i> argument of an operator that takes a fixed
number of arguments, since this is a case that will not cause stack
corruption.
<a href="https://rt.perl.org/Ticket/Display.html?id=132854">[perl #132854]</a></p>
</li>
</ul>
<a name="New-Warnings"></a><h3>New Warnings</h3>
<ul>
<li>
<p><a href="perldiag.html#Old-package-separator-used-in-string">Old package separator used in string</a></p>
<p>(W syntax) You used the old package separator, "'", in a variable
named inside a double-quoted string; e.g., <code class="inline"><span class="q">&quot;In $name&#39;s house&quot;</span></code>
.  This
is equivalent to <code class="inline"><span class="q">&quot;In $name::s house&quot;</span></code>
.  If you meant the former, put
a backslash before the apostrophe (<code class="inline"><span class="q">&quot;In $name\&#39;s house&quot;</span></code>
).</p>
</li>
<li>
<p><a href="perldiag.html#Locale-'%25s'-contains-(at-least)-the-following-characters-which-have-unexpected-meanings%3a-%25s-The-Perl-program-will-use-the-expected-meanings">Locale '%s' contains (at least) the following characters which have unexpected meanings: %s The Perl program will use the expected meanings in perldiag</a></p>
</li>
</ul>
<a name="Changes-to-Existing-Diagnostics"></a><h2>Changes to Existing Diagnostics</h2>
<ul>
<li>
<p>A false-positive warning that was issued when using a
numerically-quantified sub-pattern in a recursive regex has been
silenced. <a href="https://rt.perl.org/Public/Bug/Display.html?id=131868">[perl #131868]</a></p>
</li>
<li>
<p>The warning about useless use of a concatenation operator in void context
is now generated for expressions with multiple concatenations, such as
<code class="inline"><span class="i">$a</span>.<span class="i">$b</span>.<span class="i">$c</span></code>
, which used to mistakenly not warn.
<a href="https://rt.perl.org/Ticket/Display.html?id=6997">[perl #6997]</a></p>
</li>
<li>
<p>Warnings that a variable or subroutine "masks earlier declaration in same
...", or that an <code class="inline"><a class="l_k" href="functions/our.html">our</a></code> variable has been redeclared, have been moved to a
new warnings category "shadow".  Previously they were in category "misc".</p>
</li>
<li>
<p>The deprecation warning from <code class="inline"><span class="i">Sys::Hostname::hostname</span><span class="s">(</span><span class="s">)</span></code>
 saying that
it doesn't accept arguments now states the Perl version in which the
warning will be upgraded to an error.
<a href="https://rt.perl.org/Ticket/Display.html?id=124349">[perl #124349]</a></p>
</li>
<li>
<p>The <a href="perldiag.html">perldiag</a> entry for the error regarding a set-id script has been
expanded to make clear that the error is reporting a specific security
vulnerability, and to advise how to fix it.</p>
</li>
<li>
<p>The <code class="inline"><span class="w">Unable</span> <span class="w">to</span> <span class="w">flush</span> <span class="w">stdout</span></code>
 error message was missing a trailing
newline. [debian #875361]</p>
</li>
</ul>
<a name="Utility-Changes"></a><h1>Utility Changes</h1>
<a name="the-perlbug-manpage"></a><h2><a href="perlbug.html">perlbug</a></h2>
<ul>
<li>
<p><code class="inline">--<span class="w">help</span></code>
 and <code class="inline">--<span class="w">version</span></code>
 options have been added.</p>
</li>
</ul>
<a name="Configuration-and-Compilation"></a><h1>Configuration and Compilation</h1>
<ul>
<li><a name="*-C89-requirement"></a><b>C89 requirement</b>
<p>Perl has been documented as requiring a C89 compiler to build since October
1998.  A variety of simplifications have now been made to Perl's internals to
rely on the features specified by the C89 standard. We believe that this
internal change hasn't altered the set of platforms that Perl builds on, but
please report a bug if Perl now has new problems building on your platform.</p>
</li>
<li>
<p>On GCC, <code class="inline">-<span class="w">Werror</span>=<span class="w">pointer</span>-<span class="w">arith</span></code>
 is now enabled by default,
disallowing arithmetic on void and function pointers.</p>
</li>
<li>
<p>Where an HTML version of the documentation is installed, the HTML
documents now use relative links to refer to each other.  Links from
the index page of <a href="perlipc.html">perlipc</a> to the individual section documents are
now correct.
<a href="https://rt.perl.org/Ticket/Display.html?id=110056">[perl #110056]</a></p>
</li>
<li>
<p><i>lib/unicore/mktables</i> now correctly canonicalizes the names of the
dependencies stored in the files it generates.</p>
<p><i>regen/mk_invlists.pl</i>, unlike the other <i>regen/*.pl</i> scripts, used
<code class="inline"><span class="i">$0</span></code>
 to name itself in the dependencies stored in the files it
generates.  It now uses a literal so that the path stored in the
generated files doesn't depend on how <i>regen/mk_invlists.pl</i> is
invoked.</p>
<p>This lack of canonical names could cause test failures in <i>t/porting/regen.t</i>.
<a href="https://rt.perl.org/Ticket/Display.html?id=132925">[perl #132925]</a></p>
</li>
<li><a name="*-New-probes"></a><b>New probes</b>
<ul>
<li><a name="HAS_BUILTIN_ADD_OVERFLOW"></a><b>HAS_BUILTIN_ADD_OVERFLOW</b>
</li>
<li><a name="HAS_BUILTIN_MUL_OVERFLOW"></a><b>HAS_BUILTIN_MUL_OVERFLOW</b>
</li>
<li><a name="HAS_BUILTIN_SUB_OVERFLOW"></a><b>HAS_BUILTIN_SUB_OVERFLOW</b>
</li>
<li><a name="HAS_THREAD_SAFE_NL_LANGINFO_L"></a><b>HAS_THREAD_SAFE_NL_LANGINFO_L</b>
</li>
<li><a name="HAS_LOCALECONV_L"></a><b>HAS_LOCALECONV_L</b>
</li>
<li><a name="HAS_MBRLEN"></a><b>HAS_MBRLEN</b>
</li>
<li><a name="HAS_MBRTOWC"></a><b>HAS_MBRTOWC</b>
</li>
<li><a name="HAS_MEMRCHR"></a><b>HAS_MEMRCHR</b>
</li>
<li><a name="HAS_NANOSLEEP"></a><b>HAS_NANOSLEEP</b>
</li>
<li><a name="HAS_STRNLEN"></a><b>HAS_STRNLEN</b>
</li>
<li><a name="HAS_STRTOLD_L"></a><b>HAS_STRTOLD_L</b>
</li>
<li><a name="I_WCHAR"></a><b>I_WCHAR</b>
</li>
</ul>
</li>
</ul>
<a name="Testing"></a><h1>Testing</h1>
<ul>
<li>
<p>Testing of the XS-APItest directory is now done in parallel, where
applicable.</p>
</li>
<li>
<p>Perl now includes a default <i>.travis.yml</i> file for Travis CI testing
on github mirrors.
<a href="https://rt.perl.org/Ticket/Display.html?id=123981">[perl #123981]</a></p>
</li>
<li>
<p>The watchdog timer count in <i>re/pat_psycho.t</i> can now be overridden.</p>
<p>This test can take a long time to run, so there is a timer to keep
this in check (currently, 5 minutes). This commit adds checking
the environment variable <code class="inline"><span class="w">PERL_TEST_TIME_OUT_FACTOR</span></code>
; if set,
the time out setting is multiplied by its value.</p>
</li>
<li>
<p><i>harness</i> no longer waits for 30 seconds when running <i>t/io/openpid.t</i>.
<a href="https://rt.perl.org/Ticket/Display.html?id=121028">[perl #121028]</a>
<a href="https://rt.perl.org/Ticket/Display.html?id=132867">[perl #132867]</a></p>
</li>
</ul>
<a name="Packaging"></a><h1>Packaging</h1>
<p>For the past few years we have released perl using three different archive
formats: bzip (<code class="inline">.<span class="w">bz2</span></code>
), LZMA2 (<code class="inline">.<span class="w">xz</span></code>
) and gzip (<code class="inline">.<span class="w">gz</span></code>
). Since xz compresses
better and decompresses faster, and gzip is more compatible and uses less
memory, we have dropped the <code class="inline">.<span class="w">bz2</span></code>
 archive format with this release.
(If this poses a problem, do let us know; see <a href="#Reporting-Bugs">Reporting Bugs</a>, below.)</p>
<a name="Platform-Support"></a><h1>Platform Support</h1>
<a name="Discontinued-Platforms"></a><h2>Discontinued Platforms</h2>
<ul>
<li><a name="PowerUX-%2f-Power-MAX-OS"></a><b>PowerUX / Power MAX OS</b>
<p>Compiler hints and other support for these apparently long-defunct
platforms has been removed.</p>
</li>
</ul>
<a name="Platform-Specific-Notes"></a><h2>Platform-Specific Notes</h2>
<ul>
<li><a name="CentOS"></a><b>CentOS</b>
<p>Compilation on CentOS 5 is now fixed.</p>
</li>
<li><a name="Cygwin"></a><b>Cygwin</b>
<p>A build with the quadmath library can now be done on Cygwin.</p>
</li>
<li><a name="Darwin"></a><b>Darwin</b>
<p>Perl now correctly uses reentrant functions, like <code class="inline"><span class="w">asctime_r</span></code>
, on
versions of Darwin that have support for them.</p>
</li>
<li><a name="FreeBSD"></a><b>FreeBSD</b>
<p>FreeBSD's <i>/usr/share/mk/sys.mk</i> specifies <code class="inline">-<span class="w">O2</span></code>
 for
architectures other than ARM and MIPS. By default, perl is now compiled
with the same optimization levels.</p>
</li>
<li><a name="VMS"></a><b>VMS</b>
<p>Several fix-ups for <i>configure.com</i>, marking function VMS has
(or doesn't have).</p>
<p>CRTL features can now be set by embedders before invoking Perl by using
the <code class="inline"><span class="w">decc</span><span class="i">$feature_set</span></code>
 and <code class="inline"><span class="w">decc</span><span class="i">$feature_set_value</span></code>
 functions.
Previously any attempt to set features after image initialization were
ignored.</p>
</li>
<li><a name="Windows"></a><b>Windows</b>
<ul>
<li>
<p>Support for compiling perl on Windows using Microsoft Visual Studio 2017
(containing Visual C++ 14.1) has been added.</p>
</li>
<li>
<p>Visual C++ compiler version detection has been improved to work on non-English
language systems.</p>
</li>
<li>
<p>We now set <code class="inline"><span class="i">$Config</span>{<span class="w">libpth</span>}</code>
 correctly for 64-bit builds using Visual C++
versions earlier than 14.1.</p>
</li>
</ul>
</li>
</ul>
<a name="Internal-Changes"></a><h1>Internal Changes</h1>
<ul>
<li>
<p>A new optimisation phase has been added to the compiler,
<code class="inline"><span class="i">optimize_optree</span><span class="s">(</span><span class="s">)</span></code>
, which does a top-down scan of a complete optree
just before the peephole optimiser is run. This phase is not currently
hookable.</p>
</li>
<li>
<p>An <code class="inline"><span class="w">OP_MULTICONCAT</span></code>
 op has been added. At <code class="inline"><span class="i">optimize_optree</span><span class="s">(</span><span class="s">)</span></code>
 time, a
chain of <code class="inline"><span class="w">OP_CONCAT</span></code>
 and <code class="inline"><span class="w">OP_CONST</span></code>
 ops, together optionally with an
<code class="inline"><span class="w">OP_STRINGIFY</span></code>
 and/or <code class="inline"><span class="w">OP_SASSIGN</span></code>
, are combined into a single
<code class="inline"><span class="w">OP_MULTICONCAT</span></code>
 op. The op is of type <code class="inline"><span class="w">UNOP_AUX</span></code>
, and the aux array
contains the argument count, plus a pointer to a constant string and a set
of segment lengths. For example with</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$x</span> = <span class="q">&quot;foo=$foo, bar=$bar\n&quot;</span><span class="sc">;</span></li></ol></pre><p>the constant string would be <code class="inline"><span class="q">&quot;foo=, bar=\n&quot;</span></code>
 and the segment lengths
would be (4,6,1). If the string contains characters such as <code class="inline">\<span class="w">x80</span></code>
, whose
representation changes under utf8, two sets of strings plus lengths are
precomputed and stored.</p>
</li>
<li>
<p>Direct access to <a href="perlapi.html#PL_keyword_plugin">PL_keyword_plugin </a> is not
safe in the presence of multithreading. A new
<a href="perlapi.html#wrap_keyword_plugin">wrap_keyword_plugin </a> function has been
added to allow XS modules to safely define custom keywords even when
loaded from a thread, analogous to <a href="perlapi.html#PL_check">PL_check </a> /
<a href="perlapi.html#wrap_op_checker">wrap_op_checker </a>.</p>
</li>
<li>
<p>The <code class="inline"><span class="w">PL_statbuf</span></code>
 interpreter variable has been removed.</p>
</li>
<li>
<p>The deprecated function <code class="inline"><span class="i">to_utf8_case</span><span class="s">(</span><span class="s">)</span></code>
, accessible from XS code, has
been removed.</p>
</li>
<li>
<p>A new function
<a href="perlapi.html#is_utf8_invariant_string_loc">is_utf8_invariant_string_loc() </a>
has been added that is like
<a href="perlapi.html#is_utf8_invariant_string">is_utf8_invariant_string() </a>
but takes an extra pointer parameter into which is stored the location
of the first variant character, if any are found.</p>
</li>
<li>
<p>A new function, <a href="perlapi.html#Perl_langinfo">Perl_langinfo() </a> has been
added.  It is an (almost) drop-in replacement for the system
<code class="inline"><span class="i">nl_langinfo</span><span class="s">(</span><span class="n">3</span><span class="s">)</span></code>
, but works on platforms that lack that; as well as
being more thread-safe, and hiding some gotchas with locale handling
from the caller.  Code that uses this, needn't use <i>localeconv(3)</i>
(and be affected by the gotchas) to find the decimal point, thousands
separator, or currency symbol.  See <a href="perlapi.html#Perl_langinfo">Perl_langinfo in perlapi</a>.</p>
</li>
<li>
<p>A new API function <a href="perlapi.html#sv_rvunweaken">sv_rvunweaken() </a> has
been added to complement <a href="perlapi.html#sv_rvweaken">sv_rvweaken() </a>.
The implementation was taken from <a href="Scalar/Util.html#unweaken">unweaken in Scalar::Util</a>.</p>
</li>
<li>
<p>A new flag, <code class="inline"><span class="w">SORTf_UNSTABLE</span></code>
, has been added. This will allow a
future commit to make mergesort unstable when the user specifies &#x2018;no
sort stable&#x2019;, since it has been decided that mergesort should remain
stable by default.</p>
</li>
<li>
<p>XS modules can now automatically get reentrant versions of system
functions on threaded perls.</p>
<p>By adding</p>
<pre class="verbatim"><ol><li>    <span class="c">#define PERL_REENTRANT</span></li></ol></pre><p>near the beginning of an <code class="inline"><span class="w">XS</span></code>
 file, it will be compiled so that
whatever reentrant functions perl knows about on that system will
automatically and invisibly be used instead of the plain, non-reentrant
versions.  For example, if you write <code class="inline"><a class="l_k" href="functions/getpwnam.html">getpwnam()</a></code> in your code, on a
system that has <code class="inline"><span class="i">getpwnam_r</span><span class="s">(</span><span class="s">)</span></code>
 all calls to the former will be translated
invisibly into the latter.  This does not happen except on threaded
perls, as they aren't needed otherwise.  Be aware that which functions
have reentrant versions varies from system to system.</p>
</li>
<li>
<p>The <code class="inline"><span class="w">PERL_NO_OP_PARENT</span></code>
 build define is no longer supported, which means
that perl is now always built with <code class="inline"><span class="w">PERL_OP_PARENT</span></code>
 enabled.</p>
</li>
<li>
<p>The format and content of the non-utf8 transliteration table attached to
the <code class="inline"><span class="w">op_pv</span></code>
 field of <code class="inline"><span class="w">OP_TRANS</span></code>
/<code class="inline"><span class="w">OP_TRANSR</span></code>
 ops has changed. It's now a
<code class="inline"><span class="w">struct</span> <span class="w">OPtrans_map</span></code>
.</p>
</li>
<li>
<p>A new compiler <code class="inline"><span class="c">#define</span></code>
, <code class="inline"><span class="w">dTHX_DEBUGGING</span></code>
. has been added.  This is
useful for XS or C code that only need the thread context because their
debugging statements that get compiled only under <code class="inline">-<span class="w">DDEBUGGING</span></code>
 need
one.</p>
</li>
<li>
<p>A new API function <a href="perlapi.html#Perl_setlocale">Perl_setlocale in perlapi</a> has been added.</p>
</li>
<li>
<p><a href="perlapi.html#sync_locale">sync_locale in perlapi</a> has been revised to return a boolean as to
whether the system was using the global locale or not.</p>
</li>
<li>
<p>A new kind of magic scalar, called a "nonelem" scalar, has been introduced.
It is stored in an array to denote a non-existent element, whenever such an
element is accessed in a potential lvalue context.  It replaces the
existing "defelem" (deferred element) magic wherever this is possible,
being significantly more efficient.  This means that
<code class="inline"><span class="i">some_sub</span><span class="s">(</span><span class="i">$sparse_array</span>[<span class="i">$nonelem</span>]<span class="s">)</span></code>
 no longer has to create a new magic
defelem scalar each time, as long as the element is within the array.</p>
<p>It partially fixes the rare bug of deferred elements getting out of synch
with their arrays when the array is shifted or unshifted.
<a href="https://rt.perl.org/Ticket/Display.html?id=132729">[perl #132729]</a></p>
</li>
</ul>
<a name="Selected-Bug-Fixes"></a><h1>Selected Bug Fixes</h1>
<ul>
<li>
<p>List assignment (<code class="inline"><span class="w">aassign</span></code>
) could in some rare cases allocate an
entry on the mortals stack and leave the entry uninitialized, leading to
possible crashes.
<a href="https://rt.perl.org/Ticket/Display.html?id=131570">[perl #131570]</a></p>
</li>
<li>
<p>Attempting to apply an attribute to an <code class="inline"><a class="l_k" href="functions/our.html">our</a></code> variable where a
function of that name already exists could result in a NULL pointer
being supplied where an SV was expected, crashing perl.
<a href="https://rt.perl.org/Ticket/Display.html?id=131597">[perl #131597]</a></p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/split.html">split</a> <span class="q">&#39; &#39;</span></code>
 now correctly handles the argument being split when in the
scope of the <a href="feature.html#The-'unicode_strings'-feature">unicode_strings </a> feature. Previously, when a string using the single-byte internal
representation contained characters that are whitespace by Unicode rules but
not by ASCII rules, it treated those characters as part of fields rather
than as field separators.
<a href="https://rt.perl.org/Ticket/Display.html?id=130907">[perl #130907]</a></p>
</li>
<li>
<p>Several built-in functions previously had bugs that could cause them to
write to the internal stack without allocating room for the item being
written. In rare situations, this could have led to a crash. These bugs have
now been fixed, and if any similar bugs are introduced in future, they will
be detected automatically in debugging builds.</p>
<p>These internal stack usage checks introduced are also done
by the <code class="inline"><span class="w">entersub</span></code>
 operator when calling XSUBs.  This means we can
report which XSUB failed to allocate enough stack space.
<a href="https://rt.perl.org/Public/Bug/Display.html?id=131975">[perl #131975]</a></p>
</li>
<li>
<p>Using a symbolic ref with postderef syntax as the key in a hash lookup was
yielding an assertion failure on debugging builds.
<a href="https://rt.perl.org/Ticket/Display.html?id=131627">[perl #131627]</a></p>
</li>
<li>
<p>Array and hash variables whose names begin with a caret now admit indexing
inside their curlies when interpolated into strings, as in <code class="inline"><span class="q">&quot;${^CAPTURE[0]}&quot;</span></code>
 to index <code class="inline"><span class="i">@</span>{<span class="w">^CAPTURE</span>}</code>
.
<a href="https://rt.perl.org/Ticket/Display.html?id=131664">[perl #131664]</a></p>
</li>
<li>
<p>Fetching the name of a glob that was previously UTF-8 but wasn't any
longer would return that name flagged as UTF-8.
<a href="https://rt.perl.org/Ticket/Display.html?id=131263">[perl #131263]</a></p>
</li>
<li>
<p>The perl <code class="inline"><a class="l_k" href="functions/sprintf.html">sprintf()</a></code> function (via the underlying C function
<code class="inline"><span class="i">Perl_sv_vcatpvfn_flags</span><span class="s">(</span><span class="s">)</span></code>
) has been heavily reworked to fix many minor
bugs, including the integer wrapping of large width and precision
specifiers and potential buffer overruns. It has also been made faster in
many cases.</p>
</li>
<li>
<p>Exiting from an <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>, whether normally or via an exception, now always
frees temporary values (possibly calling destructors) <i>before</i> setting
<code class="inline"><span class="i">$@</span></code>
. For example:</p>
<pre class="verbatim"><ol><li><a name="DESTROY"></a>    sub <span class="m">DESTROY</span> <span class="s">{</span> <a class="l_k" href="functions/eval.html">eval</a> <span class="s">{</span> <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;died in DESTROY&quot;</span><span class="sc">;</span> <span class="s">}</span> <span class="s">}</span></li><li>    <a class="l_k" href="functions/eval.html">eval</a> <span class="s">{</span> <a class="l_k" href="functions/bless.html">bless</a> <span class="s">[</span><span class="s">]</span><span class="sc">;</span> <span class="s">}</span><span class="sc">;</span></li><li>    <span class="c"># $@ used to be equal to &quot;died in DESTROY&quot; here; it&#39;s now &quot;&quot;.</span></li></ol></pre></li>
<li>
<p>Fixed a duplicate symbol failure with <code class="inline">-<span class="w">flto</span> -<span class="w">mieee</span>-<span class="w">fp</span></code>
 builds.
<i>pp.c</i> defined <code class="inline"><span class="w">_LIB_VERSION</span></code>
 which <code class="inline">-<span class="w">lieee</span></code>
 already defines.
<a href="https://rt.perl.org/Ticket/Display.html?id=131786">[perl #131786]</a></p>
</li>
<li>
<p>The tokenizer no longer consumes the exponent part of a floating
point number if it's incomplete.
<a href="https://rt.perl.org/Ticket/Display.html?id=131725">[perl #131725]</a></p>
</li>
<li>
<p>On non-threaded builds, for <code class="inline"><a class="l_k" href="functions/m.html">m/$null/</a></code> where <code class="inline"><span class="i">$null</span></code>
 is an empty
string is no longer treated as if the <code class="inline"><span class="q">/o</span></code>
 flag was present when the
previous matching match operator included the <code class="inline"><span class="q">/o</span></code>
 flag.  The
rewriting used to implement this behavior could confuse the
interpreter.  This matches the behaviour of threaded builds.
<a href="https://rt.perl.org/Ticket/Display.html?id=124368">[perl #124368]</a></p>
</li>
<li>
<p>Parsing a <code class="inline"><a class="l_k" href="functions/sub.html">sub</a></code> definition could cause a use after free if the <code class="inline"><a class="l_k" href="functions/sub.html">sub</a></code>
keyword was followed by whitespace including newlines (and comments.)
<a href="https://rt.perl.org/Public/Bug/Display.html?id=131836">[perl #131836]</a></p>
</li>
<li>
<p>The tokenizer now correctly adjusts a parse pointer when skipping
whitespace in a <code class="inline"><span class="i">$</span>{<span class="w">identifier</span>}</code>
 construct.
<a href="https://rt.perl.org/Public/Bug/Display.html?id=131949">[perl #131949]</a></p>
</li>
<li>
<p>Accesses to <code class="inline"><span class="i">$</span>{<span class="w">^LAST_FH</span>}</code>
 no longer assert after using any of a
variety of I/O operations on a non-glob.
<a href="https://rt.perl.org/Public/Bug/Display.html?id=128263">[perl #128263]</a></p>
</li>
<li>
<p>The XS-level <code class="inline"><span class="i">Copy</span><span class="s">(</span><span class="s">)</span></code>
, <code class="inline"><span class="i">Move</span><span class="s">(</span><span class="s">)</span></code>
, <code class="inline"><span class="i">Zero</span><span class="s">(</span><span class="s">)</span></code>
 macros and their variants now
assert if the pointers supplied are <code class="inline"><span class="w">NULL</span></code>
.  ISO C considers
supplying NULL pointers to the functions these macros are built upon
as undefined behaviour even when their count parameters are zero.
Based on these assertions and the original bug report three macro
calls were made conditional.
<a href="https://rt.perl.org/Public/Bug/Display.html?id=131746">[perl #131746]</a>
<a href="https://rt.perl.org/Public/Bug/Display.html?id=131892">[perl #131892]</a></p>
</li>
<li>
<p>Only the <code class="inline">=</code>
 operator is permitted for defining defaults for
parameters in subroutine signatures.  Previously other assignment
operators, e.g. <code class="inline">+=</code>
, were also accidentally permitted.
<a href="https://rt.perl.org/Public/Bug/Display.html?id=131777">[perl #131777]</a></p>
</li>
<li>
<p>Package names are now always included in <code class="inline"><span class="j">:</span><a class="l_k" href="functions/prototype.html">prototype</a></code>
 warnings
<a href="https://rt.perl.org/Public/Bug/Display.html?id=131833">[perl #131833]</a></p>
</li>
<li>
<p>The <code class="inline"><span class="w">je_old_stack_hwm</span></code>
 field, previously only found in the <code class="inline"><span class="w">jmpenv</span></code>

structure on debugging builds, has been added to non-debug builds as
well. This fixes an issue with some CPAN modules caused by the size of
this structure varying between debugging and non-debugging builds.
<a href="https://rt.perl.org/Public/Bug/Display.html?id=131942">[perl #131942]</a></p>
</li>
<li>
<p>The arguments to the <code class="inline"><span class="i">ninstr</span><span class="s">(</span><span class="s">)</span></code>
 macro are now correctly parenthesized.</p>
</li>
<li>
<p>A NULL pointer dereference in the <code class="inline"><span class="i">S_regmatch</span><span class="s">(</span><span class="s">)</span></code>
 function has been
fixed.
<a href="https://rt.perl.org/Public/Bug/Display.html?id=132017">[perl #132017]</a></p>
</li>
<li>
<p>Calling <a href="functions/exec.html">exec PROGRAM LIST</a> with an empty <code class="inline"><span class="w">LIST</span></code>

has been fixed.  This should call <code class="inline"><span class="i">execvp</span><span class="s">(</span><span class="s">)</span></code>
 with an empty <code class="inline"><span class="w">argv</span></code>
 array
(containing only the terminating <code class="inline"><span class="w">NULL</span></code>
 pointer), but was instead just
returning false (and not setting <a href="perlvar.html#%24!">$! </a>).
<a href="https://rt.perl.org/Public/Bug/Display.html?id=131730">[perl #131730]</a></p>
</li>
<li>
<p>The <code class="inline"><span class="w">gv_fetchmeth_sv</span></code>
 C function stopped working properly in Perl 5.22 when
fetching a constant with a UTF-8 name if that constant subroutine was stored in
the stash as a simple scalar reference, rather than a full typeglob.  This has
been corrected.</p>
</li>
<li>
<p>Single-letter debugger commands followed by an argument which starts with
punctuation  (e.g. <code class="inline"><span class="w">p</span><span class="i">$^V</span></code>
 and <code class="inline"><a class="l_k" href="functions/x.html">x@ARGV</a></code>) now work again.  They had been
wrongly requiring a space between the command and the argument.
<a href="https://rt.perl.org/Public/Bug/Display.html?id=120174">[perl #120174]</a></p>
</li>
<li>
<p><a href="functions/splice.html">splice ARRAY,OFFSET,LENGTH,LIST</a> now throws an exception
("Modification of a read-only value attempted") when modifying a read-only
array.  Until now it had been silently modifying the array.  The new behaviour
is consistent with the behaviour of <a href="functions/push.html">push ARRAY,LIST</a> and
<a href="functions/unshift.html">unshift ARRAY,LIST</a>.
<a href="https://rt.perl.org/Public/Bug/Display.html?id=131000">[perl #131000]</a></p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/stat.html">stat()</a></code>, <code class="inline"><a class="l_k" href="functions/lstat.html">lstat()</a></code>, and file test operators now fail if given a
filename containing a nul character, in the same way that <code class="inline"><a class="l_k" href="functions/open.html">open()</a></code>
already fails.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/stat.html">stat()</a></code>, <code class="inline"><a class="l_k" href="functions/lstat.html">lstat()</a></code>, and file test operators now reliably set <code class="inline"><span class="i">$!</span></code>
 when
failing due to being applied to a closed or otherwise invalid file handle.</p>
</li>
<li>
<p>File test operators for Unix permission bits that don't exist on a
particular platform, such as <code class="inline">-k</code>
 (sticky bit) on Windows, now check that
the file being tested exists before returning the blanket false result,
and yield the appropriate errors if the argument doesn't refer to a file.</p>
</li>
<li>
<p>Fixed a 'read before buffer' overrun when parsing a range starting with
<code class="inline">\<span class="w">N</span><span class="s">{</span><span class="s">}</span></code>
 at the beginning of the character set for the transliteration
operator.
<a href="https://rt.perl.org/Ticket/Display.html?id=132245">[perl #132245]</a></p>
</li>
<li>
<p>Fixed a leaked scalar when parsing an empty <code class="inline">\<span class="w">N</span><span class="s">{</span><span class="s">}</span></code>
 at compile-time.
<a href="https://rt.perl.org/Ticket/Display.html?id=132245">[perl #132245]</a></p>
</li>
<li>
<p>Calling <code class="inline"><a class="l_k" href="functions/do.html">do</a> <span class="i">$path</span></code>
 on a directory or block device now yields a meaningful
error code in <code class="inline"><span class="i">$!</span></code>
.
<a href="https://rt.perl.org/Ticket/Display.html?id=125774">[perl #125774]</a></p>
</li>
<li>
<p>Regexp substitution using an overloaded replacement value that provides
a tainted stringification now correctly taints the resulting string.
<a href="https://rt.perl.org/Ticket/Display.html?id=115266">[perl #115266]</a></p>
</li>
<li>
<p>Lexical sub declarations in <code class="inline"><a class="l_k" href="functions/do.html">do</a></code> blocks such as <code class="inline"><a name="lex"></a><a class="l_k" href="functions/do.html">do</a> <span class="s">{</span> <a class="l_k" href="functions/my.html">my</a> sub <span class="m">lex</span><span class="sc">;</span> <span class="n">123</span> <span class="s">}</span></code>

could corrupt the stack, erasing items already on the stack in the
enclosing statement.  This has been fixed.
<a href="https://rt.perl.org/Ticket/Display.html?id=132442">[perl #132442]</a></p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/pack.html">pack</a></code> and <code class="inline"><a class="l_k" href="functions/unpack.html">unpack</a></code> can now handle repeat counts and lengths that
exceed two billion.
<a href="https://rt.perl.org/Ticket/Display.html?id=119367">[perl #119367]</a></p>
</li>
<li>
<p>Digits past the radix point in octal and binary floating point literals
now have the correct weight on platforms where a floating point
significand doesn't fit into an integer type.</p>
</li>
<li>
<p>The canonical truth value no longer has a spurious special meaning as a
callable subroutine.  It used to be a magic placeholder for a missing
<code class="inline"><a class="l_k" href="functions/import.html">import</a></code> or <code class="inline"><span class="w">unimport</span></code>
 method, but is now treated like any other string
<code class="inline"><span class="n">1</span></code>
.
<a href="https://rt.perl.org/Ticket/Display.html?id=126042">[perl #126042]</a></p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/system.html">system</a></code> now reduces its arguments to strings in the parent process, so
any effects of stringifying them (such as overload methods being called
or warnings being emitted) are visible in the way the program expects.
<a href="https://rt.perl.org/Ticket/Display.html?id=121105">[perl #121105]</a></p>
</li>
<li>
<p>The <code class="inline"><a class="l_k" href="functions/readpipe.html">readpipe()</a></code> built-in function now checks at compile time that
it has only one parameter expression, and puts it in scalar context,
thus ensuring that it doesn't corrupt the stack at runtime.
<a href="https://rt.perl.org/Ticket/Display.html?id=4574">[perl #4574]</a></p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> now performs correct reference counting when aliasing <code class="inline"><span class="i">$a</span></code>
 and
<code class="inline"><span class="i">$b</span></code>
, thus avoiding premature destruction and leakage of scalars if they
are re-aliased during execution of the sort comparator.
<a href="https://rt.perl.org/Ticket/Display.html?id=92264">[perl #92264]</a></p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/reverse.html">reverse</a></code> with no operand, reversing <code class="inline"><span class="i">$_</span></code>
 by default, is no longer in
danger of corrupting the stack.
<a href="https://rt.perl.org/Ticket/Display.html?id=132544">[perl #132544]</a></p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/exec.html">exec</a></code>, <code class="inline"><a class="l_k" href="functions/system.html">system</a></code>, et al are no longer liable to have their argument
lists corrupted by reentrant calls and by magic such as tied scalars.
<a href="https://rt.perl.org/Ticket/Display.html?id=129888">[perl #129888]</a></p>
</li>
<li>
<p>Perl's own <code class="inline"><span class="w">malloc</span></code>
 no longer gets confused by attempts to allocate
more than a gigabyte on a 64-bit platform.
<a href="https://rt.perl.org/Ticket/Display.html?id=119829">[perl #119829]</a></p>
</li>
<li>
<p>Stacked file test operators in a sort comparator expression no longer
cause a crash.
<a href="https://rt.perl.org/Ticket/Display.html?id=129347">[perl #129347]</a></p>
</li>
<li>
<p>An identity <code class="inline"><a class="l_k" href="functions/tr.html">tr///</a></code> transformation on a reference is no longer mistaken
for that reference for the purposes of deciding whether it can be
assigned to.
<a href="https://rt.perl.org/Ticket/Display.html?id=130578">[perl #130578]</a></p>
</li>
<li>
<p>Lengthy hexadecimal, octal, or binary floating point literals no
longer cause undefined behaviour when parsing digits that are of such
low significance that they can't affect the floating point value.
<a href="https://rt.perl.org/Ticket/Display.html?id=131894">[perl #131894]</a></p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/open.html">open</a> <span class="i">$$scalarref</span>...</code>
 and similar invocations no longer leak the file
handle.
<a href="https://rt.perl.org/Ticket/Display.html?id=115814">[perl #115814]</a></p>
</li>
<li>
<p>Some convoluted kinds of regexp no longer cause an arithmetic overflow
when compiled.
<a href="https://rt.perl.org/Ticket/Display.html?id=131893">[perl #131893]</a></p>
</li>
<li>
<p>The default typemap, by avoiding <code class="inline"><span class="w">newGVgen</span></code>
, now no longer leaks when
XSUBs return file handles (<code class="inline"><span class="w">PerlIO</span> *</code>
 or <code class="inline"><span class="w">FILE</span> *</code>
).
<a href="https://rt.perl.org/Ticket/Display.html?id=115814">[perl #115814]</a></p>
</li>
<li>
<p>Creating a <code class="inline"><a class="l_k" href="functions/BEGIN.html">BEGIN</a></code> block as an XS subroutine with a prototype no longer
crashes because of the early freeing of the subroutine.</p>
</li>
<li>
<p>The <code class="inline"><a class="l_k" href="functions/printf.html">printf</a></code> format specifier <code class="inline"><span class="i">%.</span><span class="n">0</span><span class="w">f</span></code>
 no longer rounds incorrectly
<a href="https://rt.perl.org/Ticket/Display.html?id=47602">[perl #47602]</a>,
and now shows the correct sign for a negative zero.</p>
</li>
<li>
<p>Fixed an issue where the error <code class="inline"><span class="w">Scalar</span> <span class="w">value</span> <span class="i">@arrayname</span>[<span class="n">0</span>] <span class="w">better</span>
<span class="w">written</span> <span class="w">as</span> <span class="i">$arrayname</span></code>
 would give an error <code class="inline"><span class="w">Cannot</span> <a class="l_k" href="functions/printf.html">printf</a> <span class="i">Inf</span> <span class="w">with</span> <span class="q">&#39;c&#39;</span></code>

when arrayname starts with <code class="inline"><span class="w">Inf</span></code>
.
<a href="https://rt.perl.org/Ticket/Display.html?id=132645">[perl #132645]</a></p>
</li>
<li>
<p>The Perl implementation of <code class="inline"><span class="i">getcwd</span><span class="s">(</span><span class="s">)</span></code>
 in <code class="inline"><span class="w">Cwd</span></code>
 in the PathTools
distribution now behaves the same as XS implementation on errors: it
returns an error, and sets <code class="inline"><span class="i">$!</span></code>
.
<a href="https://rt.perl.org/Ticket/Display.html?id=132648">[perl #132648]</a></p>
</li>
<li>
<p>Vivify array elements when putting them on the stack.
Fixes <a href="https://rt.perl.org/Ticket/Display.html?id=8910">[perl #8910]</a>
(reported in April 2002).</p>
</li>
<li>
<p>Fixed parsing of braced subscript after parens. Fixes
<a href="https://rt.perl.org/Ticket/Display.html?id=8045">[perl #8045]</a>
(reported in December 2001).</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/tr.html">tr/non_utf8/long_non_utf8/c</a></code> could give the wrong results when the
length of the replacement character list was greater than 0x7fff.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/tr.html">tr/non_utf8/non_utf8/cd</a></code> failed to add the implied
<code class="inline">\<span class="i">x</span><span class="s">{</span><span class="n">100</span><span class="s">}</span>-\<span class="i">x</span><span class="s">{</span><span class="n">7</span><span class="w">fffffff</span><span class="s">}</span></code>
 to the search character list.</p>
</li>
<li>
<p>Compilation failures within "perl-within-perl" constructs, such as with
string interpolation and the right part of <code class="inline"><a class="l_k" href="functions/s.html">s///e</a></code>, now cause
compilation to abort earlier.</p>
<p>Previously compilation could continue in order to report other errors,
but the failed sub-parse could leave partly parsed constructs on the
parser shift-reduce stack, confusing the parser, leading to perl
crashes.
<a href="https://rt.perl.org/Ticket/Display.html?id=125351">[perl #125351]</a></p>
</li>
<li>
<p>On threaded perls where the decimal point (radix) character is not a
dot, it has been possible for a race to occur between threads when one
needs to use the real radix character (such as with <code class="inline"><a class="l_k" href="functions/sprintf.html">sprintf</a></code>).  This has
now been fixed by use of a mutex on systems without thread-safe locales,
and the problem just doesn't come up on those with thread-safe locales.</p>
</li>
<li>
<p>Errors while compiling a regex character class could sometime trigger an
assertion failure.
<a href="https://rt.perl.org/Ticket/Display.html?id=132163">[perl #132163]</a></p>
</li>
</ul>
<a name="Acknowledgements"></a><h1>Acknowledgements</h1>
<p>Perl 5.28.0 represents approximately 13 months of development since Perl
5.26.0 and contains approximately 730,000 lines of changes across 2,200
files from 77 authors.</p>
<p>Excluding auto-generated files, documentation and release tools, there were
approximately 580,000 lines of changes to 1,300 .pm, .t, .c and .h files.</p>
<p>Perl continues to flourish into its fourth decade thanks to a vibrant
community of users and developers. The following people are known to have
contributed the improvements that became Perl 5.28.0:</p>
<p>Aaron Crane, Abigail, &#xc6;var Arnfj&#xf6;r&#xf0; Bjarmason, Alberto Sim&#xf5;es, Alexandr
Savca, Andrew Fresh, Andy Dougherty, Andy Lester, Aristotle Pagaltzis, Ask
Bj&#xf8;rn Hansen, Chris 'BinGOs' Williams, Craig A. Berry, Dagfinn Ilmari
Manns&#xe5;ker, Dan Collins, Daniel Dragan, David Cantrell, David Mitchell,
Dmitry Ulanov, Dominic Hargreaves, E. Choroba, Eric Herman, Eugen Konkov,
Father Chrysostomos, Gene Sullivan, George Hartzell, Graham Knop, Harald
J&#xf6;rg, H.Merijn Brand, Hugo van der Sanden, Jacques Germishuys, James E
Keenan, Jarkko Hietaniemi, Jerry D. Hedden, J. Nick Koston, John Lightsey,
John Peacock, John P. Linderman, John SJ Anderson, Karen Etheridge, Karl
Williamson, Ken Brown, Ken Cotterill, Leon Timmermans, Lukas Mai, Marco
Fontani, Marc-Philip Werner, Matthew Horsfall, Neil Bowers, Nicholas Clark,
Nicolas R., Niko Tyni, Pali, Paul Marquess, Peter John Acklam, Reini Urban,
Renee Baecker, Ricardo Signes, Robin Barker, Sawyer X, Scott Lanning, Sergey
Aleynikov, Shirakata Kentaro, Shoichi Kaji, Slaven Rezic, Smylers, Steffen
M&#xfc;ller, Steve Hay, Sullivan Beck, Thomas Sibley, Todd Rinaldo, Tomasz
Konojacki, Tom Hukins, Tom Wyant, Tony Cook, Vitali Peil, Yves Orton,
Zefram.</p>
<p>The list above is almost certainly incomplete as it is automatically
generated from version control history. In particular, it does not include
the names of the (very much appreciated) contributors who reported issues to
the Perl bug tracker.</p>
<p>Many of the changes included in this version originated in the CPAN modules
included in Perl's core. We're grateful to the entire CPAN community for
helping Perl to flourish.</p>
<p>For a more complete list of all of Perl's historical contributors, please
see the <i>AUTHORS</i> file in the Perl source distribution.</p>
<a name="Reporting-Bugs"></a><h1>Reporting Bugs</h1>
<p>If you find what you think is a bug, you might check the perl bug database
at <a href="https://rt.perl.org/">https://rt.perl.org/</a> .  There may also be information at
<a href="http://www.perl.org/">http://www.perl.org/</a> , the Perl Home Page.</p>
<p>If you believe you have an unreported bug, please run the <a href="perlbug.html">perlbug</a> program
included with your release.  Be sure to trim your bug down to a tiny but
sufficient test case.  Your bug report, along with the output of <code class="inline"><span class="w">perl</span> -<span class="w">V</span></code>
,
will be sent off to perlbug@perl.org to be analysed by the Perl porting team.</p>
<p>If the bug you are reporting has security implications which make it
inappropriate to send to a publicly archived mailing list, then see
<a href="perlsec.html#SECURITY-VULNERABILITY-CONTACT-INFORMATION">SECURITY VULNERABILITY CONTACT INFORMATION in perlsec</a>
for details of how to report the issue.</p>
<a name="Give-Thanks"></a><h1>Give Thanks</h1>
<p>If you wish to thank the Perl 5 Porters for the work we had done in Perl 5,
you can do so by running the <code class="inline"><span class="w">perlthanks</span></code>
 program:</p>
<pre class="verbatim"><ol><li>    <span class="w">perlthanks</span></li></ol></pre><p>This will send an email to the Perl 5 Porters list with your show of thanks.</p>
<a name="SEE-ALSO"></a><h1>SEE ALSO</h1>
<p>The <i>Changes</i> file for an explanation of how to view exhaustive details on
what changed.</p>
<p>The <i>INSTALL</i> file for how to build Perl.</p>
<p>The <i>README</i> file for general stuff.</p>
<p>The <i>Artistic</i> and <i>Copying</i> files for copyright information.</p>




  <div id="page_index" class="hud_container">
    <div id="page_index_header" class="hud_header">
      <div id="page_index_close" class="hud_close"><a href="#" onClick="pageIndex.hide();return false;"></a></div>
      <div id="page_index_title" class="hud_title"><span class="hud_span_top">Page index</span></div>
      <div id="page_index_topright" class="hud_topright"></div>
    </div>
    <div id="page_index_content" class="hud_content">
      <ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#Core-Enhancements">Core Enhancements</a><ul><li><a href="#Unicode-10.0-is-supported">Unicode 10.0 is supported</a><li><a href="#perlfunc%2fdelete-EXPR-on-key%2fvalue-hash-slices">perlfunc/delete EXPR on key/value hash slices</a><li><a href="#Experimentally%2c-there-are-now-alphabetic-synonyms-for-some-regular-expression-assertions">Experimentally, there are now alphabetic synonyms for some regular expression assertions</a><li><a href="#Mixed-Unicode-scripts-are-now-detectable">Mixed Unicode scripts are now detectable</a><li><a href="#In-place-editing-with-perl--i-is-now-safer">In-place editing with perl -i is now safer</a><li><a href="#Initialisation-of-aggregate-state-variables">Initialisation of aggregate state variables</a><li><a href="#Full-size-inode-numbers">Full-size inode numbers</a><li><a href="#The-sprintf-%25j-format-size-modifier-is-now-available-with-pre-C99-compilers">The sprintf %j format size modifier is now available with pre-C99 compilers</a><li><a href="#Close-on-exec-flag-set-atomically">Close-on-exec flag set atomically</a><li><a href="#String--and-number-specific-bitwise-ops-are-no-longer-experimental">String- and number-specific bitwise ops are no longer experimental</a><li><a href="#Locales-are-now-thread-safe-on-systems-that-support-them">Locales are now thread-safe on systems that support them</a><li><a href="#New-read-only-predefined-variable-%24%7b%5eSAFE_LOCALES%7d">New read-only predefined variable ${^SAFE_LOCALES}</a></ul><li><a href="#Security">Security</a><ul><li><a href="#%5bCVE-2017-12837%5d-Heap-buffer-overflow-in-regular-expression-compiler">[CVE-2017-12837] Heap buffer overflow in regular expression compiler</a><li><a href="#%5bCVE-2017-12883%5d-Buffer-over-read-in-regular-expression-parser">[CVE-2017-12883] Buffer over-read in regular expression parser</a><li><a href="#%5bCVE-2017-12814%5d-%24ENV%7b%24key%7d-stack-buffer-overflow-on-Windows">[CVE-2017-12814] $ENV{$key} stack buffer overflow on Windows</a><li><a href="#Default-Hash-Function-Change">Default Hash Function Change</a></ul><li><a href="#Incompatible-Changes">Incompatible Changes</a><ul><li><a href="#Subroutine-attribute-and-signature-order">Subroutine attribute and signature order</a><li><a href="#Comma-less-variable-lists-in-formats-are-no-longer-allowed">Comma-less variable lists in formats are no longer allowed</a><li><a href="#The-%3alocked-and-%3aunique-attributes-have-been-removed">The :locked and :unique attributes have been removed</a><li><a href="#%5cN%7b%7d-with-nothing-between-the-braces-is-now-illegal">\N{} with nothing between the braces is now illegal</a><li><a href="#Opening-the-same-symbol-as-both-a-file-and-directory-handle-is-no-longer-allowed">Opening the same symbol as both a file and directory handle is no longer allowed</a><li><a href="#Use-of-bare-%3c%3c-to-mean-%3c%3c%22%22-is-no-longer-allowed">Use of bare << to mean <<"" is no longer allowed</a><li><a href="#Setting-%24%2f-to-a-reference-to-a-non-positive-integer-no-longer-allowed">Setting $/ to a reference to a non-positive integer no longer allowed</a><li><a href="#Unicode-code-points-with-values-exceeding-IV_MAX-are-now-fatal">Unicode code points with values exceeding IV_MAX are now fatal</a><li><a href="#The-B%3a%3aOP%3a%3aterse-method-has-been-removed">The B::OP::terse method has been removed</a><li><a href="#Use-of-inherited-AUTOLOAD-for-non-methods-is-no-longer-allowed">Use of inherited AUTOLOAD for non-methods is no longer allowed</a><li><a href="#Use-of-strings-with-code-points-over-0xFF-is-not-allowed-for-bitwise-string-operators">Use of strings with code points over 0xFF is not allowed for bitwise string operators</a><li><a href="#Setting-%24%7b%5eENCODING%7d-to-a-defined-value-is-now-illegal">Setting ${^ENCODING} to a defined value is now illegal</a><li><a href="#Backslash-no-longer-escapes-colon-in-PATH-for-the--S-switch">Backslash no longer escapes colon in PATH for the -S switch</a><li><a href="#the--DH-(DEBUG_H)-misfeature-has-been-removed">the -DH (DEBUG_H) misfeature has been removed</a><li><a href="#Yada-yada-is-now-strictly-a-statement">Yada-yada is now strictly a statement</a><li><a href="#Sort-algorithm-can-no-longer-be-specified">Sort algorithm can no longer be specified</a><li><a href="#Over-radix-digits-in-floating-point-literals">Over-radix digits in floating point literals</a><li><a href="#Return-type-of-unpackstring()">Return type of unpackstring()</a></ul><li><a href="#Deprecations">Deprecations</a><ul><li><a href="#Use-of-perlfunc%2fvec-EXPR%2cOFFSET%2cBITS-on-strings-with-code-points-above-0xFF-is-deprecated">Use of perlfunc/vec EXPR,OFFSET,BITS on strings with code points above 0xFF is deprecated</a><li><a href="#Some-uses-of-unescaped-%22%7b%22-in-regexes-are-no-longer-fatal">Some uses of unescaped "{" in regexes are no longer fatal</a><li><a href="#Use-of-unescaped-%22%7b%22-immediately-after-a-%22(%22-in-regular-expression-patterns-is-deprecated">Use of unescaped "{" immediately after a "(" in regular expression patterns is deprecated</a><li><a href="#Assignment-to-%24%5b-will-be-fatal-in-Perl-5.30">Assignment to $[ will be fatal in Perl 5.30</a><li><a href="#hostname()-won't-accept-arguments-in-Perl-5.32">hostname() won't accept arguments in Perl 5.32</a><li><a href="#Module-removals">Module removals</a></ul><li><a href="#Performance-Enhancements">Performance Enhancements</a><li><a href="#Modules-and-Pragmata">Modules and Pragmata</a><ul><li><a href="#Removal-of-use-vars">Removal of use vars</a><li><a href="#Use-of-DynaLoader-changed-to-XSLoader-in-many-modules">Use of DynaLoader changed to XSLoader in many modules</a><li><a href="#Updated-Modules-and-Pragmata">Updated Modules and Pragmata</a><li><a href="#Removed-Modules-and-Pragmata">Removed Modules and Pragmata</a></ul><li><a href="#Documentation">Documentation</a><ul><li><a href="#Changes-to-Existing-Documentation">Changes to Existing Documentation</a></ul><li><a href="#Diagnostics">Diagnostics</a><ul><li><a href="#New-Diagnostics">New Diagnostics</a><li><a href="#Changes-to-Existing-Diagnostics">Changes to Existing Diagnostics</a></ul><li><a href="#Utility-Changes">Utility Changes</a><ul><li><a href="#the-perlbug-manpage">the perlbug manpage</a></ul><li><a href="#Configuration-and-Compilation">Configuration and Compilation</a><li><a href="#Testing">Testing</a><li><a href="#Packaging">Packaging</a><li><a href="#Platform-Support">Platform Support</a><ul><li><a href="#Discontinued-Platforms">Discontinued Platforms</a><li><a href="#Platform-Specific-Notes">Platform-Specific Notes</a></ul><li><a href="#Internal-Changes">Internal Changes</a><li><a href="#Selected-Bug-Fixes">Selected Bug Fixes</a><li><a href="#Acknowledgements">Acknowledgements</a><li><a href="#Reporting-Bugs">Reporting Bugs</a><li><a href="#Give-Thanks">Give Thanks</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul>
    </div>
    <div id="page_index_footer" class="hud_footer">
      <div id="page_index_bottomleft" class="hud_bottomleft"></div>
      <div id="page_index_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
      <div id="page_index_resize" class="hud_resize"></div>
    </div>
  </div>


                </div>
              </article>
        </div>        
      </main>
    </div>
    <footer class="footer row bg-light pt-5 pb-5">
      <div class="col-sm-8 offset-sm-2">
        <div class="row">
          <div class="col-md-4">
            <ul class="list-unstyled">
              <li>
                <h4>Site info</h4>
              </li>
              <li>Site mantained by
                <a href="mailto:community@opusvl.com"><img class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo"></a>
              </li>
              <li>Docs mantained by
                <a href="//lists.cpan.org/showlist.cgi?name=perl5-porters" rel="noopener">Perl 5 Porters</a>
              </li>
              <li>Development supported by
                <a href="//opusvl.com" rel="noopener">OpusVL</a>
              </li>
            </ul>
          </div>
          <div class="col-md-8">
            <div class="row">
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Manual</h4>
                  </li>
                  <li>
                    <a href="/5/28/0/index-overview.html">Overview</a>
                  </li>
                  <li>
                    <a href="/5/28/0/index-tutorials.html">Tutorials</a>
                  </li>
                  <li>
                    <a href="/5/28/0/index-faq.html">FAQs</a>
                  </li>
                  <li>
                    <a href="/5/28/0/index-history.html">Changes</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Reference</h4>
                  </li>
                  <li>
                    <a href="/5/28/0/index-language.html">Language</a>
                  </li>
                  <li>
                    <a href="/5/28/0/index-functions.html">Functions</a>
                  </li>
                  <li>
                    <a href="/5/28/0/perlop.html">Operators</a>
                  </li>
                  <li>
                    <a href="/5/28/0/perlvar.html">Variables</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Modules</h4>
                  </li>
                  <li>
                    <a href="/5/28/0/index-modules-A.html">Modules</a>
                  </li>
                  <li>
                    <a href="/5/28/0/index-pragmas.html">Pragmas</a>
                  </li>
                  <li>
                    <a href="/5/28/0/index-utilities.html">Utilities</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Misc</h4>
                  </li>
                  <li>
                    <a href="/5/28/0/index-licence.html">License</a>
                  </li>
                  <li>
                    <a href="/5/28/0/index-internals.html">Internals</a>
                  </li>
                  <li>
                    <a href="/5/28/0/index-platforms.html">Platforms</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class=" col-12 footer-inf text-center">
            <small>perldoc.perl.org - Official documentation for the Perl programming language</small>
          </div>
        </div>
      </div>
    </footer>
    <script src="/public/js/main.min.js"></script>
  </body>
</html>
