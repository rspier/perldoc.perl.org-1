<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="/public/img/favicon.ico">
    <title>IPC::Open2 - perldoc.perl.org</title>
    <link href="/public/css/main.min.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900' rel='stylesheet' type='text/css'>
  </head>
  <body class="body container-fluid ">
    <div class="wrapper">
        <nav class="navbar navbar-expand-md navbar-dark bg-primary bg-perl fixed-top justify-content-between">
          <a class="navbar-brand" href="/">
            <object class="logo" data="/public/img/logo_perl_doc.svg" type="image/svg+xml">Perl Documentation Logo</object>
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div id="navbar" class="collapse navbar-collapse justify-content-end">
            <div class="nav navbar-nav navbar-right">
              <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" id="dropdown-menu-links" aria-labelledby="navbarDropdown">
                </div>
              </li>
              <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                  <a class="dropdown-item" href="/5/28/0/index-overview.html">Overview</a>
                  <a class="dropdown-item" href="/5/28/0/index-tutorials.html">Tutorials</a>
                  <a class="dropdown-item" href="/5/28/0/index-faq.html">FAQs</a>
                  <a class="dropdown-item" href="/5/28/0/index-history.html">History / Changes</a>
                  <a class="dropdown-item" href="/5/28/0/index-licence.html">License</a>
                  <a class="dropdown-item" href="/5/28/0/index-language.html">Language</a>
                  <a class="dropdown-item" href="/5/28/0/index-functions.html">Functions</a>
                  <a class="dropdown-item" href="/5/28/0/perlop.html">Operators</a>
                  <a class="dropdown-item" href="/5/28/0/perlvar.html">Special Variables</a>
                  <a class="dropdown-item" href="/5/28/0/index-pragmas.html">Pragmas</a>
                  <a class="dropdown-item" href="/5/28/0/index-utilities.html">Utilities</a>
                  <a class="dropdown-item" href="/5/28/0/index-internals.html">Internals</a>
                  <a class="dropdown-item" href="/5/28/0/index-platforms.html">Platform Specific</a>
                </div>
              </li>
              <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle " data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3" class="dropdown-menu letters-wrap">
                  <a class="dropdown-item" href="/5/28/0/index-functions.html">A-Z</a>
                  <a class="dropdown-item" href="/5/28/0/index-functions-by-cat.html">By Category</a>
                  <div class="dropdown-divider"></div>
                  <div class="letter-container">
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-A.html">A</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-B.html">B</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-C.html">C</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-D.html">D</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-E.html">E</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-F.html">F</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-G.html">G</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-H.html">H</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-I.html">I</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-J.html">J</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-L.html">L</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-M.html">M</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-N.html">N</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-O.html">O</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-P.html">P</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-S.html">S</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-T.html">T</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-U.html">U</a>
                    <a class="dropdown-item letters" href="/5/28/0/index-modules-X.html">X</a>
                    </div>
                </div>
              </li>
            </div>
          </div>
          <!--/.nav-collapse -->
        </nav>
     
      <main class="row main-content pb-5 pt-5">
        <div class="col-sm-8 offset-sm-2">
          <div class="row">
            <div class="col-sm-12">
                <div id="breadcrumbs">
                    
    <a href="../index.html">Home</a> &gt;
    
      
        <a href="../index-modules-I.html">Core modules (I)</a> &gt;
      
    
    IPC::Open2
  

                </div>
            </div>
          </div>
          <div class="row">
              <article class="col-sm-12 content">
                <div class="documentation-wrapper">
                  <div id="perl_version">
                    <p class='page-title'> Perl 5 version 28.0 documentation</p>
                  </div>
                  <h1>IPC::Open2</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a><li><a href="#SYNOPSIS">SYNOPSIS</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#WARNING">WARNING</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>IPC::Open2 - open a process for both reading and writing using open2()</p>
<a name="SYNOPSIS"></a><h1>SYNOPSIS</h1>
<pre class="verbatim"><ol><li>    <a class="l_k" href="../functions/use.html">use</a> <span class="w">IPC::Open2</span><span class="sc">;</span></li><li></li><li>    <span class="i">$pid</span> = <span class="i">open2</span><span class="s">(</span>\<span class="i">*CHLD_OUT</span><span class="cm">,</span> \<span class="i">*CHLD_IN</span><span class="cm">,</span> <span class="q">&#39;some cmd and args&#39;</span><span class="s">)</span><span class="sc">;</span></li><li>      <span class="c"># or without using the shell</span></li><li>    <span class="i">$pid</span> = <span class="i">open2</span><span class="s">(</span>\<span class="i">*CHLD_OUT</span><span class="cm">,</span> \<span class="i">*CHLD_IN</span><span class="cm">,</span> <span class="q">&#39;some&#39;</span><span class="cm">,</span> <span class="q">&#39;cmd&#39;</span><span class="cm">,</span> <span class="q">&#39;and&#39;</span><span class="cm">,</span> <span class="q">&#39;args&#39;</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>    <span class="c"># or with handle autovivification</span></li><li>    <a class="l_k" href="../functions/my.html">my</a><span class="s">(</span><span class="i">$chld_out</span><span class="cm">,</span> <span class="i">$chld_in</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$pid</span> = <span class="i">open2</span><span class="s">(</span><span class="i">$chld_out</span><span class="cm">,</span> <span class="i">$chld_in</span><span class="cm">,</span> <span class="q">&#39;some cmd and args&#39;</span><span class="s">)</span><span class="sc">;</span></li><li>      <span class="c"># or without using the shell</span></li><li>    <span class="i">$pid</span> = <span class="i">open2</span><span class="s">(</span><span class="i">$chld_out</span><span class="cm">,</span> <span class="i">$chld_in</span><span class="cm">,</span> <span class="q">&#39;some&#39;</span><span class="cm">,</span> <span class="q">&#39;cmd&#39;</span><span class="cm">,</span> <span class="q">&#39;and&#39;</span><span class="cm">,</span> <span class="q">&#39;args&#39;</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="../functions/waitpid.html">waitpid</a><span class="s">(</span> <span class="i">$pid</span><span class="cm">,</span> <span class="n">0</span> <span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="../functions/my.html">my</a> <span class="i">$child_exit_status</span> = <span class="i">$?</span> &gt;&gt; <span class="n">8</span><span class="sc">;</span></li></ol></pre><a name="DESCRIPTION"></a><h1>DESCRIPTION</h1>
<p>The open2() function runs the given $cmd and connects $chld_out for
reading and $chld_in for writing.  It's what you think should work 
when you try</p>
<pre class="verbatim"><ol><li>    <span class="i">$pid</span> = <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span><span class="w">HANDLE</span><span class="cm">,</span> <span class="q">&quot;|cmd args|&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>The write filehandle will have autoflush turned on.</p>
<p>If $chld_out is a string (that is, a bareword filehandle rather than a glob
or a reference) and it begins with <code class="inline">&gt;<span class="i">&amp;</span></code>
, then the child will send output
directly to that file handle.  If $chld_in is a string that begins with
<code class="inline">&lt;<span class="i">&amp;</span></code>
, then $chld_in will be closed in the parent, and the child will
read from it directly.  In both cases, there will be a dup(2) instead of a
pipe(2) made.</p>
<p>If either reader or writer is the null string, this will be replaced
by an autogenerated filehandle.  If so, you must pass a valid lvalue
in the parameter slot so it can be overwritten in the caller, or
an exception will be raised.</p>
<p>open2() returns the process ID of the child process.  It doesn't return on
failure: it just raises an exception matching <code class="inline"><span class="q">/^open2:/</span></code>
.  However,
<code class="inline"><a class="l_k" href="../functions/exec.html">exec</a></code> failures in the child are not detected.  You'll have to
trap SIGPIPE yourself.</p>
<p>open2() does not wait for and reap the child process after it exits.
Except for short programs where it's acceptable to let the operating system
take care of this, you need to do this yourself.  This is normally as
simple as calling <code class="inline"><a class="l_k" href="../functions/waitpid.html">waitpid</a> <span class="i">$pid</span><span class="cm">,</span> <span class="n">0</span></code>
 when you're done with the process.
Failing to do this can result in an accumulation of defunct or "zombie"
processes.  See <a href="../functions/waitpid.html">waitpid</a> for more information.</p>
<p>This whole affair is quite dangerous, as you may block forever.  It
assumes it's going to talk to something like <b>bc</b>, both writing
to it and reading from it.  This is presumably safe because you
"know" that commands like <b>bc</b> will read a line at a time and
output a line at a time.  Programs like <b>sort</b> that read their
entire input stream first, however, are quite apt to cause deadlock.</p>
<p>The big problem with this approach is that if you don't have control 
over source code being run in the child process, you can't control
what it does with pipe buffering.  Thus you can't just open a pipe to
<code class="inline"><span class="w">cat</span> -<span class="w">v</span></code>
 and continually read and write a line from it.</p>
<p>The IO::Pty and Expect modules from CPAN can help with this, as they
provide a real tty (well, a pseudo-tty, actually), which gets you
back to line buffering in the invoked command again.</p>
<a name="WARNING"></a><h1>WARNING</h1>
<p>The order of arguments differs from that of open3().</p>
<a name="SEE-ALSO"></a><h1>SEE ALSO</h1>
<p>See <a href="../IPC/Open3.html">IPC::Open3</a> for an alternative that handles STDERR as well.  This
function is really just a wrapper around open3().</p>




  <div id="page_index" class="hud_container">
    <div id="page_index_header" class="hud_header">
      <div id="page_index_close" class="hud_close"><a href="#" onClick="pageIndex.hide();return false;"></a></div>
      <div id="page_index_title" class="hud_title"><span class="hud_span_top">Page index</span></div>
      <div id="page_index_topright" class="hud_topright"></div>
    </div>
    <div id="page_index_content" class="hud_content">
      <ul><li><a href="#NAME">NAME</a><li><a href="#SYNOPSIS">SYNOPSIS</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#WARNING">WARNING</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul>
    </div>
    <div id="page_index_footer" class="hud_footer">
      <div id="page_index_bottomleft" class="hud_bottomleft"></div>
      <div id="page_index_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
      <div id="page_index_resize" class="hud_resize"></div>
    </div>
  </div>


                </div>
              </article>
        </div>        
      </main>
    </div>
    <footer class="footer row bg-light pt-5 pb-5">
      <div class="col-sm-8 offset-sm-2">
        <div class="row">
          <div class="col-md-4">
            <ul class="list-unstyled">
              <li>
                <h4>Site info</h4>
              </li>
              <li>Site mantained by
                <a href="mailto:community@opusvl.com"><img class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo"></a>
              </li>
              <li>Docs mantained by
                <a href="//lists.cpan.org/showlist.cgi?name=perl5-porters" rel="noopener">Perl 5 Porters</a>
              </li>
              <li>Development supported by
                <a href="//opusvl.com" rel="noopener">OpusVL</a>
              </li>
            </ul>
          </div>
          <div class="col-md-8">
            <div class="row">
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Manual</h4>
                  </li>
                  <li>
                    <a href="/5/28/0/index-overview.html">Overview</a>
                  </li>
                  <li>
                    <a href="/5/28/0/index-tutorials.html">Tutorials</a>
                  </li>
                  <li>
                    <a href="/5/28/0/index-faq.html">FAQs</a>
                  </li>
                  <li>
                    <a href="/5/28/0/index-history.html">Changes</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Reference</h4>
                  </li>
                  <li>
                    <a href="/5/28/0/index-language.html">Language</a>
                  </li>
                  <li>
                    <a href="/5/28/0/index-functions.html">Functions</a>
                  </li>
                  <li>
                    <a href="/5/28/0/perlop.html">Operators</a>
                  </li>
                  <li>
                    <a href="/5/28/0/perlvar.html">Variables</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Modules</h4>
                  </li>
                  <li>
                    <a href="/5/28/0/index-modules-A.html">Modules</a>
                  </li>
                  <li>
                    <a href="/5/28/0/index-pragmas.html">Pragmas</a>
                  </li>
                  <li>
                    <a href="/5/28/0/index-utilities.html">Utilities</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Misc</h4>
                  </li>
                  <li>
                    <a href="/5/28/0/index-licence.html">License</a>
                  </li>
                  <li>
                    <a href="/5/28/0/index-internals.html">Internals</a>
                  </li>
                  <li>
                    <a href="/5/28/0/index-platforms.html">Platforms</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class=" col-12 footer-inf text-center">
            <small>perldoc.perl.org - Official documentation for the Perl programming language</small>
          </div>
        </div>
      </div>
    </footer>
    <script src="/public/js/main.min.js"></script>
  </body>
</html>
