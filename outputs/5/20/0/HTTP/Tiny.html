<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="/public/img/favicon.ico">
    <title>HTTP::Tiny - perldoc.perl.org</title>
    <link href="/public/css/main.min.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900' rel='stylesheet' type='text/css'>
  </head>
  <body class="body container-fluid ">
    <div class="wrapper">
        <nav class="navbar navbar-expand-md navbar-dark bg-primary bg-perl fixed-top justify-content-between">
          <a class="navbar-brand" href="/">
            <object class="logo" data="/public/img/logo_perl_doc.svg" type="image/svg+xml">Perl Documentation Logo</object>
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div id="navbar" class="collapse navbar-collapse justify-content-end">
            <div class="nav navbar-nav navbar-right">
              <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" id="dropdown-menu-links" aria-labelledby="navbarDropdown">
                </div>
              </li>
              <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                  <a class="dropdown-item" href="/5/20/0/index-overview.html">Overview</a>
                  <a class="dropdown-item" href="/5/20/0/index-tutorials.html">Tutorials</a>
                  <a class="dropdown-item" href="/5/20/0/index-faq.html">FAQs</a>
                  <a class="dropdown-item" href="/5/20/0/index-history.html">History / Changes</a>
                  <a class="dropdown-item" href="/5/20/0/index-licence.html">License</a>
                  <a class="dropdown-item" href="/5/20/0/index-language.html">Language</a>
                  <a class="dropdown-item" href="/5/20/0/index-functions.html">Functions</a>
                  <a class="dropdown-item" href="/5/20/0/perlop.html">Operators</a>
                  <a class="dropdown-item" href="/5/20/0/perlvar.html">Special Variables</a>
                  <a class="dropdown-item" href="/5/20/0/index-pragmas.html">Pragmas</a>
                  <a class="dropdown-item" href="/5/20/0/index-utilities.html">Utilities</a>
                  <a class="dropdown-item" href="/5/20/0/index-internals.html">Internals</a>
                  <a class="dropdown-item" href="/5/20/0/index-platforms.html">Platform Specific</a>
                </div>
              </li>
              <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle " data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3" class="dropdown-menu letters-wrap">
                  <a class="dropdown-item" href="/5/20/0/index-functions.html">A-Z</a>
                  <a class="dropdown-item" href="/5/20/0/index-functions-by-cat.html">By Category</a>
                  <div class="dropdown-divider"></div>
                  <div class="letter-container">
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-A.html">A</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-B.html">B</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-C.html">C</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-D.html">D</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-E.html">E</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-F.html">F</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-G.html">G</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-H.html">H</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-I.html">I</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-J.html">J</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-L.html">L</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-M.html">M</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-N.html">N</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-O.html">O</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-P.html">P</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-S.html">S</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-T.html">T</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-U.html">U</a>
                    <a class="dropdown-item letters" href="/5/20/0/index-modules-X.html">X</a>
                    </div>
                </div>
              </li>
            </div>
          </div>
          <!--/.nav-collapse -->
        </nav>
     
      <main class="row main-content pb-5 pt-5">
        <div class="col-sm-8 offset-sm-2">
          <div class="row">
            <div class="col-sm-12">
                <div id="breadcrumbs">
                    
    <a href="../index.html">Home</a> &gt;
    
      
        <a href="../index-modules-H.html">Core modules (H)</a> &gt;
      
    
    HTTP::Tiny
  

                </div>
            </div>
          </div>
          <div class="row">
              <article class="col-sm-12 content">
                <div class="documentation-wrapper">
                  <div id="perl_version">
                    <p class='page-title'> Perl 5 version 20.0 documentation</p>
                  </div>
                  <h1>HTTP::Tiny</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a><li><a href="#VERSION">VERSION</a><li><a href="#SYNOPSIS">SYNOPSIS</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#METHODS">METHODS</a><ul><li><a href="#new">new</a><li><a href="#get%7chead%7cput%7cpost%7cdelete">get|head|put|post|delete</a><li><a href="#post_form">post_form</a><li><a href="#mirror">mirror</a><li><a href="#request">request</a><li><a href="#www_form_urlencode">www_form_urlencode</a></ul><li><a href="#SSL-SUPPORT">SSL SUPPORT</a><li><a href="#PROXY-SUPPORT">PROXY SUPPORT</a><li><a href="#LIMITATIONS">LIMITATIONS</a><li><a href="#SEE-ALSO">SEE ALSO</a><li><a href="#SUPPORT">SUPPORT</a><ul><li><a href="#Bugs-%2f-Feature-Requests">Bugs / Feature Requests</a><li><a href="#Source-Code">Source Code</a></ul><li><a href="#AUTHORS">AUTHORS</a><li><a href="#CONTRIBUTORS">CONTRIBUTORS</a><li><a href="#COPYRIGHT-AND-LICENSE">COPYRIGHT AND LICENSE</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>HTTP::Tiny - A small, simple, correct HTTP/1.1 client</p>
<a name="VERSION"></a><h1>VERSION</h1>
<p>version 0.043</p>
<a name="SYNOPSIS"></a><h1>SYNOPSIS</h1>
<pre class="verbatim"><ol><li>    <a class="l_k" href="../functions/use.html">use</a> <span class="w">HTTP::Tiny</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="../functions/my.html">my</a> <span class="i">$response</span> = <span class="w">HTTP::Tiny</span><span class="w">-&gt;new</span><span class="w">-&gt;get</span><span class="s">(</span><span class="q">&#39;<a href="http://example.com/">http://example.com/</a>&#39;</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Failed!\n&quot;</span> <a class="l_k" href="../functions/unless.html">unless</a> <span class="i">$response</span>-&gt;{<span class="w">success</span>}<span class="sc">;</span></li><li></li><li>    <a class="l_k" href="../functions/print.html">print</a> <span class="q">&quot;$response-&gt;{status} $response-&gt;{reason}\n&quot;</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="../functions/while.html">while</a> <span class="s">(</span><a class="l_k" href="../functions/my.html">my</a> <span class="s">(</span><span class="i">$k</span><span class="cm">,</span> <span class="i">$v</span><span class="s">)</span> = <a class="l_k" href="../functions/each.html">each</a> <span class="i">%</span>{<span class="i">$response</span>-&gt;{<span class="w">headers</span>}}<span class="s">)</span> <span class="s">{</span></li><li>        <a class="l_k" href="../functions/for.html">for</a> <span class="s">(</span><a class="l_k" href="../functions/ref.html">ref</a> <span class="i">$v</span> <a class="l_k" href="../functions/eq.html">eq</a> <span class="q">&#39;ARRAY&#39;</span> ? <span class="i">@$v</span> <span class="co">:</span> <span class="i">$v</span><span class="s">)</span> <span class="s">{</span></li><li>            <a class="l_k" href="../functions/print.html">print</a> <span class="q">&quot;$k: $_\n&quot;</span><span class="sc">;</span></li><li>        <span class="s">}</span></li><li>    <span class="s">}</span></li><li></li><li>    <a class="l_k" href="../functions/print.html">print</a> <span class="i">$response</span>-&gt;{<span class="w">content</span>} <a class="l_k" href="../functions/if.html">if</a> <a class="l_k" href="../functions/length.html">length</a> <span class="i">$response</span>-&gt;{<span class="w">content</span>}<span class="sc">;</span></li></ol></pre><a name="DESCRIPTION"></a><h1>DESCRIPTION</h1>
<p>This is a very simple HTTP/1.1 client, designed for doing simple
requests without the overhead of a large framework like <a href="http://search.cpan.org/perldoc/LWP::UserAgent">LWP::UserAgent</a>.</p>
<p>It is more correct and more complete than <a href="http://search.cpan.org/perldoc/HTTP::Lite">HTTP::Lite</a>.  It supports
proxies and redirection.  It also correctly resumes after EINTR.</p>
<p>If <a href="../IO/Socket/IP.html">IO::Socket::IP</a> 0.25 or later is installed, HTTP::Tiny will use it instead
of <a href="../IO/Socket/INET.html">IO::Socket::INET</a> for transparent support for both IPv4 and IPv6.</p>
<p>Cookie support requires <a href="http://search.cpan.org/perldoc/HTTP::CookieJar">HTTP::CookieJar</a> or an equivalent class.</p>
<a name="METHODS"></a><h1>METHODS</h1>
<a name="new"></a><h2>new</h2>
<pre class="verbatim"><ol><li>    <span class="i">$http</span> = <span class="w">HTTP::Tiny</span><span class="w">-&gt;new</span><span class="s">(</span> <span class="i">%attributes</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>This constructor returns a new HTTP::Tiny object.  Valid attributes include:</p>
<ul>
<li>
<p><code class="inline"><span class="w">agent</span></code>
</p>
<p>A user-agent string (defaults to 'HTTP-Tiny/$VERSION'). If <code class="inline"><span class="w">agent</span></code>
 ends in a space character, the default user-agent string is appended.</p>
</li>
<li>
<p><code class="inline"><span class="w">cookie_jar</span></code>
</p>
<p>An instance of <a href="http://search.cpan.org/perldoc/HTTP::CookieJar">HTTP::CookieJar</a> or equivalent class that supports the <code class="inline"><span class="w">add</span></code>
 and <code class="inline"><span class="w">cookie_header</span></code>
 methods</p>
</li>
<li>
<p><code class="inline"><span class="w">default_headers</span></code>
</p>
<p>A hashref of default headers to apply to requests</p>
</li>
<li>
<p><code class="inline"><span class="w">local_address</span></code>
</p>
<p>The local IP address to bind to</p>
</li>
<li>
<p><code class="inline"><span class="w">keep_alive</span></code>
</p>
<p>Whether to reuse the last connection (if for the same scheme, host and port) (defaults to 1)</p>
</li>
<li>
<p><code class="inline"><span class="w">max_redirect</span></code>
</p>
<p>Maximum number of redirects allowed (defaults to 5)</p>
</li>
<li>
<p><code class="inline"><span class="w">max_size</span></code>
</p>
<p>Maximum response size (only when not using a data callback).  If defined, responses larger than this will return an exception.</p>
</li>
<li>
<p><code class="inline"><span class="w">http_proxy</span></code>
</p>
<p>URL of a proxy server to use for HTTP connections (default is <code class="inline"><span class="i">$ENV</span>{<span class="w">http_proxy</span>}</code>
 if set)</p>
</li>
<li>
<p><code class="inline"><span class="w">https_proxy</span></code>
</p>
<p>URL of a proxy server to use for HTTPS connections (default is <code class="inline"><span class="i">$ENV</span>{<span class="w">https_proxy</span>}</code>
 if set)</p>
</li>
<li>
<p><code class="inline"><span class="w">proxy</span></code>
</p>
<p>URL of a generic proxy server for both HTTP and HTTPS connections (default is <code class="inline"><span class="i">$ENV</span>{<span class="w">all_proxy</span>}</code>
 if set)</p>
</li>
<li>
<p><code class="inline"><span class="w">no_proxy</span></code>
</p>
<p>List of domain suffixes that should not be proxied.  Must be a comma-separated string or an array reference. (default is <code class="inline"><span class="i">$ENV</span>{<span class="w">no_proxy</span>}</code>
)</p>
</li>
<li>
<p><code class="inline"><span class="w">timeout</span></code>
</p>
<p>Request timeout in seconds (default is 60)</p>
</li>
<li>
<p><code class="inline"><span class="w">verify_SSL</span></code>
</p>
<p>A boolean that indicates whether to validate the SSL certificate of an <code class="inline"><span class="w">https</span></code>

connection (default is false)</p>
</li>
<li>
<p><code class="inline"><span class="w">SSL_options</span></code>
</p>
<p>A hashref of <code class="inline"><span class="w">SSL_</span>*</code>
 options to pass through to <a href="http://search.cpan.org/perldoc/IO::Socket::SSL">IO::Socket::SSL</a></p>
</li>
</ul>
<p>Exceptions from <code class="inline"><span class="w">max_size</span></code>
, <code class="inline"><span class="w">timeout</span></code>
 or other errors will result in a
pseudo-HTTP status code of 599 and a reason of "Internal Exception". The
content field in the response will contain the text of the exception.</p>
<p>The <code class="inline"><span class="w">keep_alive</span></code>
 parameter enables a persistent connection, but only to a
single destination scheme, host and port.  Also, if any connection-relevant
attributes are modified, a persistent connection will be dropped.  If you want
persistent connections across multiple destinations, use multiple HTTP::Tiny
objects.</p>
<p>See <a href="#SSL-SUPPORT">SSL SUPPORT</a> for more on the <code class="inline"><span class="w">verify_SSL</span></code>
 and <code class="inline"><span class="w">SSL_options</span></code>
 attributes.</p>
<a name="get%7chead%7cput%7cpost%7cdelete"></a><h2>get|head|put|post|delete</h2>
<pre class="verbatim"><ol><li>    <span class="i">$response</span> = <span class="i">$http</span><span class="i">-&gt;get</span><span class="s">(</span><span class="i">$url</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$response</span> = <span class="i">$http</span><span class="i">-&gt;get</span><span class="s">(</span><span class="i">$url</span><span class="cm">,</span> \<span class="i">%options</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$response</span> = <span class="i">$http</span><span class="i">-&gt;head</span><span class="s">(</span><span class="i">$url</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>These methods are shorthand for calling <code class="inline"><span class="i">request</span><span class="s">(</span><span class="s">)</span></code>
 for the given method.  The
URL must have unsafe characters escaped and international domain names encoded.
See <code class="inline"><span class="i">request</span><span class="s">(</span><span class="s">)</span></code>
 for valid options and a description of the response.</p>
<p>The <code class="inline"><span class="w">success</span></code>
 field of the response will be true if the status code is 2XX.</p>
<a name="post_form"></a><h2>post_form</h2>
<pre class="verbatim"><ol><li>    <span class="i">$response</span> = <span class="i">$http</span><span class="i">-&gt;post_form</span><span class="s">(</span><span class="i">$url</span><span class="cm">,</span> <span class="i">$form_data</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$response</span> = <span class="i">$http</span><span class="i">-&gt;post_form</span><span class="s">(</span><span class="i">$url</span><span class="cm">,</span> <span class="i">$form_data</span><span class="cm">,</span> \<span class="i">%options</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>This method executes a <code class="inline"><span class="w">POST</span></code>
 request and sends the key/value pairs from a
form data hash or array reference to the given URL with a <code class="inline"><span class="w">content</span>-<span class="w">type</span></code>
 of
<code class="inline"><span class="w">application</span>/<span class="w">x</span>-<span class="w">www</span>-<span class="w">form</span>-<span class="w">urlencoded</span></code>
.  If data is provided as an array
reference, the order is preserved; if provided as a hash reference, the terms
are sorted on key and value for consistency.  See documentation for the
<code class="inline"><span class="w">www_form_urlencode</span></code>
 method for details on the encoding.</p>
<p>The URL must have unsafe characters escaped and international domain names
encoded.  See <code class="inline"><span class="i">request</span><span class="s">(</span><span class="s">)</span></code>
 for valid options and a description of the response.
Any <code class="inline"><span class="w">content</span>-<span class="w">type</span></code>
 header or content in the options hashref will be ignored.</p>
<p>The <code class="inline"><span class="w">success</span></code>
 field of the response will be true if the status code is 2XX.</p>
<a name="mirror"></a><h2>mirror</h2>
<pre class="verbatim"><ol><li>    <span class="i">$response</span> = <span class="i">$http</span><span class="i">-&gt;mirror</span><span class="s">(</span><span class="i">$url</span><span class="cm">,</span> <span class="i">$file</span><span class="cm">,</span> \<span class="i">%options</span><span class="s">)</span></li><li>    <a class="l_k" href="../functions/if.html">if</a> <span class="s">(</span> <span class="i">$response</span>-&gt;{<span class="w">success</span>} <span class="s">)</span> <span class="s">{</span></li><li>        <a class="l_k" href="../functions/print.html">print</a> <span class="q">&quot;$file is up to date\n&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>Executes a <code class="inline"><span class="w">GET</span></code>
 request for the URL and saves the response body to the file
name provided.  The URL must have unsafe characters escaped and international
domain names encoded.  If the file already exists, the request will include an
<code class="inline"><span class="w">If</span>-<span class="w">Modified</span>-<span class="w">Since</span></code>
 header with the modification timestamp of the file.  You
may specify a different <code class="inline"><span class="w">If</span>-<span class="w">Modified</span>-<span class="w">Since</span></code>
 header yourself in the <code class="inline"><span class="i">$options</span>-&gt;{<span class="w">headers</span>}</code>
 hash.</p>
<p>The <code class="inline"><span class="w">success</span></code>
 field of the response will be true if the status code is 2XX
or if the status code is 304 (unmodified).</p>
<p>If the file was modified and the server response includes a properly
formatted <code class="inline"><span class="w">Last</span>-<span class="w">Modified</span></code>
 header, the file modification time will
be updated accordingly.</p>
<a name="request"></a><h2>request</h2>
<pre class="verbatim"><ol><li>    <span class="i">$response</span> = <span class="i">$http</span><span class="i">-&gt;request</span><span class="s">(</span><span class="i">$method</span><span class="cm">,</span> <span class="i">$url</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$response</span> = <span class="i">$http</span><span class="i">-&gt;request</span><span class="s">(</span><span class="i">$method</span><span class="cm">,</span> <span class="i">$url</span><span class="cm">,</span> \<span class="i">%options</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Executes an HTTP request of the given method type ('GET', 'HEAD', 'POST',
'PUT', etc.) on the given URL.  The URL must have unsafe characters escaped and
international domain names encoded.</p>
<p>If the URL includes a "user:password" stanza, they will be used for Basic-style
authorization headers.  (Authorization headers will not be included in a
redirected request.) For example:</p>
<pre class="verbatim"><ol><li>    <span class="i">$http</span><span class="i">-&gt;request</span><span class="s">(</span><span class="q">&#39;GET&#39;</span><span class="cm">,</span> <span class="q">&#39;<a href="http://Aladdin:open">http://Aladdin:open</a> sesame@example.com/&#39;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>If the "user:password" stanza contains reserved characters, they must
be percent-escaped:</p>
<pre class="verbatim"><ol><li>    <span class="i">$http</span><span class="i">-&gt;request</span><span class="s">(</span><span class="q">&#39;GET&#39;</span><span class="cm">,</span> <span class="q">&#39;<a href="http://john%40example.com:password@example.com/">http://john%40example.com:password@example.com/</a>&#39;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>A hashref of options may be appended to modify the request.</p>
<p>Valid options are:</p>
<ul>
<li>
<p><code class="inline"><span class="w">headers</span></code>
</p>
<p>A hashref containing headers to include with the request.  If the value for
a header is an array reference, the header will be output multiple times with
each value in the array.  These headers over-write any default headers.</p>
</li>
<li>
<p><code class="inline"><span class="w">content</span></code>
</p>
<p>A scalar to include as the body of the request OR a code reference
that will be called iteratively to produce the body of the request</p>
</li>
<li>
<p><code class="inline"><span class="w">trailer_callback</span></code>
</p>
<p>A code reference that will be called if it exists to provide a hashref
of trailing headers (only used with chunked transfer-encoding)</p>
</li>
<li>
<p><code class="inline"><span class="w">data_callback</span></code>
</p>
<p>A code reference that will be called for each chunks of the response
body received.</p>
</li>
</ul>
<p>If the <code class="inline"><span class="w">content</span></code>
 option is a code reference, it will be called iteratively
to provide the content body of the request.  It should return the empty
string or undef when the iterator is exhausted.</p>
<p>If the <code class="inline"><span class="w">content</span></code>
 option is the empty string, no <code class="inline"><span class="w">content</span>-<span class="w">type</span></code>
 or
<code class="inline"><span class="w">content</span>-<a class="l_k" href="../functions/length.html">length</a></code>
 headers will be generated.</p>
<p>If the <code class="inline"><span class="w">data_callback</span></code>
 option is provided, it will be called iteratively until
the entire response body is received.  The first argument will be a string
containing a chunk of the response body, the second argument will be the
in-progress response hash reference, as described below.  (This allows
customizing the action of the callback based on the <code class="inline"><span class="w">status</span></code>
 or <code class="inline"><span class="w">headers</span></code>

received prior to the content body.)</p>
<p>The <code class="inline"><span class="w">request</span></code>
 method returns a hashref containing the response.  The hashref
will have the following keys:</p>
<ul>
<li>
<p><code class="inline"><span class="w">success</span></code>
</p>
<p>Boolean indicating whether the operation returned a 2XX status code</p>
</li>
<li>
<p><code class="inline"><span class="w">url</span></code>
</p>
<p>URL that provided the response. This is the URL of the request unless
there were redirections, in which case it is the last URL queried
in a redirection chain</p>
</li>
<li>
<p><code class="inline"><span class="w">status</span></code>
</p>
<p>The HTTP status code of the response</p>
</li>
<li>
<p><code class="inline"><span class="w">reason</span></code>
</p>
<p>The response phrase returned by the server</p>
</li>
<li>
<p><code class="inline"><span class="w">content</span></code>
</p>
<p>The body of the response.  If the response does not have any content
or if a data callback is provided to consume the response body,
this will be the empty string</p>
</li>
<li>
<p><code class="inline"><span class="w">headers</span></code>
</p>
<p>A hashref of header fields.  All header field names will be normalized
to be lower case. If a header is repeated, the value will be an arrayref;
it will otherwise be a scalar string containing the value</p>
</li>
</ul>
<p>On an exception during the execution of the request, the <code class="inline"><span class="w">status</span></code>
 field will
contain 599, and the <code class="inline"><span class="w">content</span></code>
 field will contain the text of the exception.</p>
<a name="www_form_urlencode"></a><h2>www_form_urlencode</h2>
<pre class="verbatim"><ol><li>    <span class="i">$params</span> = <span class="i">$http</span><span class="i">-&gt;www_form_urlencode</span><span class="s">(</span> <span class="i">$data</span> <span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$response</span> = <span class="i">$http</span><span class="i">-&gt;get</span><span class="s">(</span><span class="q">&quot;<a href="http://example.com/query?">http://example.com/query?</a>$params&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>This method converts the key/value pairs from a data hash or array reference
into a <code class="inline"><a class="l_k" href="../functions/x.html">x-www-form-urlencoded</a></code> string.  The keys and values from the data
reference will be UTF-8 encoded and escaped per RFC 3986.  If a value is an
array reference, the key will be repeated with each of the values of the array
reference.  If data is provided as a hash reference, the key/value pairs in the
resulting string will be sorted by key and value for consistent ordering.</p>
<a name="SSL-SUPPORT"></a><h1>SSL SUPPORT</h1>
<p>Direct <code class="inline"><span class="w">https</span></code>
 connections are supported only if <a href="http://search.cpan.org/perldoc/IO::Socket::SSL">IO::Socket::SSL</a> 1.56 or
greater and <a href="http://search.cpan.org/perldoc/Net::SSLeay">Net::SSLeay</a> 1.49 or greater are installed. An exception will be
thrown if a new enough versions of these modules not installed or if the SSL
encryption fails. An <code class="inline"><span class="w">https</span></code>
 connection may be made via an <code class="inline"><span class="w">http</span></code>
 proxy that
supports the CONNECT command (i.e. RFC 2817).  You may not proxy <code class="inline"><span class="w">https</span></code>
 via
a proxy that itself requires <code class="inline"><span class="w">https</span></code>
 to communicate.</p>
<p>SSL provides two distinct capabilities:</p>
<ul>
<li>
<p>Encrypted communication channel</p>
</li>
<li>
<p>Verification of server identity</p>
</li>
</ul>
<p><b>By default, HTTP::Tiny does not verify server identity</b>.</p>
<p>Server identity verification is controversial and potentially tricky because it
depends on a (usually paid) third-party Certificate Authority (CA) trust model
to validate a certificate as legitimate.  This discriminates against servers
with self-signed certificates or certificates signed by free, community-driven
CA's such as <a href="http://cacert.org">CAcert.org</a>.</p>
<p>By default, HTTP::Tiny does not make any assumptions about your trust model,
threat level or risk tolerance.  It just aims to give you an encrypted channel
when you need one.</p>
<p>Setting the <code class="inline"><span class="w">verify_SSL</span></code>
 attribute to a true value will make HTTP::Tiny verify
that an SSL connection has a valid SSL certificate corresponding to the host
name of the connection and that the SSL certificate has been verified by a CA.
Assuming you trust the CA, this will protect against a <a href="http://en.wikipedia.org/wiki/Man-in-the-middle_attack">man-in-the-middle attack</a>.  If you are
concerned about security, you should enable this option.</p>
<p>Certificate verification requires a file containing trusted CA certificates.
If the <a href="http://search.cpan.org/perldoc/Mozilla::CA">Mozilla::CA</a> module is installed, HTTP::Tiny will use the CA file
included with it as a source of trusted CA's.  (This means you trust Mozilla,
the author of Mozilla::CA, the CPAN mirror where you got Mozilla::CA, the
toolchain used to install it, and your operating system security, right?)</p>
<p>If that module is not available, then HTTP::Tiny will search several
system-specific default locations for a CA certificate file:</p>
<ul>
<li>
<p>/etc/ssl/certs/ca-certificates.crt</p>
</li>
<li>
<p>/etc/pki/tls/certs/ca-bundle.crt</p>
</li>
<li>
<p>/etc/ssl/ca-bundle.pem</p>
</li>
</ul>
<p>An exception will be raised if <code class="inline"><span class="w">verify_SSL</span></code>
 is true and no CA certificate file
is available.</p>
<p>If you desire complete control over SSL connections, the <code class="inline"><span class="w">SSL_options</span></code>
 attribute
lets you provide a hash reference that will be passed through to
<code class="inline"><span class="i">IO::Socket::SSL::start_SSL</span><span class="s">(</span><span class="s">)</span></code>
, overriding any options set by HTTP::Tiny. For
example, to provide your own trusted CA file:</p>
<pre class="verbatim"><ol><li>    <span class="w">SSL_options</span> <span class="cm">=&gt;</span> <span class="s">{</span></li><li>        <span class="w">SSL_ca_file</span> <span class="cm">=&gt;</span> <span class="i">$file_path</span><span class="cm">,</span></li><li>    <span class="s">}</span></li></ol></pre><p>The <code class="inline"><span class="w">SSL_options</span></code>
 attribute could also be used for such things as providing a
client certificate for authentication to a server or controlling the choice of
cipher used for the SSL connection. See <a href="http://search.cpan.org/perldoc/IO::Socket::SSL">IO::Socket::SSL</a> documentation for
details.</p>
<a name="PROXY-SUPPORT"></a><h1>PROXY SUPPORT</h1>
<p>HTTP::Tiny can proxy both <code class="inline"><span class="w">http</span></code>
 and <code class="inline"><span class="w">https</span></code>
 requests.  Only Basic proxy
authorization is supported and it must be provided as part of the proxy URL:
<code class="inline"><a href="http://user:pass@proxy.example.com/">http://user:pass@proxy.example.com/</a></code>.</p>
<p>HTTP::Tiny supports the following proxy environment variables:</p>
<ul>
<li>
<p>http_proxy</p>
</li>
<li>
<p>https_proxy or HTTPS_PROXY</p>
</li>
<li>
<p>all_proxy or ALL_PROXY</p>
</li>
</ul>
<p>Tunnelling <code class="inline"><span class="w">https</span></code>
 over an <code class="inline"><span class="w">http</span></code>
 proxy using the CONNECT method is
supported.  If your proxy uses <code class="inline"><span class="w">https</span></code>
 itself, you can not tunnel <code class="inline"><span class="w">https</span></code>

over it.</p>
<p>Be warned that proxying an <code class="inline"><span class="w">https</span></code>
 connection opens you to the risk of a
man-in-the-middle attack by the proxy server.</p>
<p>The <code class="inline"><span class="w">no_proxy</span></code>
 environment variable is supported in the format of a
comma-separated list of domain extensions proxy should not be used for.</p>
<p>Proxy arguments passed to <code class="inline"><span class="w">new</span></code>
 will override their corresponding
environment variables.</p>
<a name="LIMITATIONS"></a><h1>LIMITATIONS</h1>
<p>HTTP::Tiny is <i>conditionally compliant</i> with the
<a href="http://www.w3.org/Protocols/rfc2616/rfc2616.html">HTTP/1.1 specification</a>.
It attempts to meet all "MUST" requirements of the specification, but does not
implement all "SHOULD" requirements.</p>
<p>Some particular limitations of note include:</p>
<ul>
<li>
<p>HTTP::Tiny focuses on correct transport.  Users are responsible for ensuring
that user-defined headers and content are compliant with the HTTP/1.1
specification.</p>
</li>
<li>
<p>Users must ensure that URLs are properly escaped for unsafe characters and that
international domain names are properly encoded to ASCII. See <a href="http://search.cpan.org/perldoc/URI::Escape">URI::Escape</a>,
<a href="http://search.cpan.org/perldoc/URI::_punycode">URI::_punycode</a> and <a href="http://search.cpan.org/perldoc/Net::IDN::Encode">Net::IDN::Encode</a>.</p>
</li>
<li>
<p>Redirection is very strict against the specification.  Redirection is only
automatic for response codes 301, 302 and 307 if the request method is 'GET' or
'HEAD'.  Response code 303 is always converted into a 'GET' redirection, as
mandated by the specification.  There is no automatic support for status 305
("Use proxy") redirections.</p>
</li>
<li>
<p>There is no provision for delaying a request body using an <code class="inline"><span class="w">Expect</span></code>
 header.
Unexpected <code class="inline"><span class="n">1</span><span class="w">XX</span></code>
 responses are silently ignored as per the specification.</p>
</li>
<li>
<p>Only 'chunked' <code class="inline"><span class="w">Transfer</span>-<span class="w">Encoding</span></code>
 is supported.</p>
</li>
<li>
<p>There is no support for a Request-URI of '*' for the 'OPTIONS' request.</p>
</li>
</ul>
<p>Despite the limitations listed above, HTTP::Tiny is considered
feature-complete.  New feature requests should be directed to
<a href="http://search.cpan.org/perldoc/HTTP::Tiny::UA">HTTP::Tiny::UA</a>.</p>
<a name="SEE-ALSO"></a><h1>SEE ALSO</h1>
<ul>
<li>
<p><a href="http://search.cpan.org/perldoc/HTTP::Tiny::UA">HTTP::Tiny::UA</a> - Higher level UA features for HTTP::Tiny</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/HTTP::Thin">HTTP::Thin</a> - HTTP::Tiny wrapper with <a href="http://search.cpan.org/perldoc/HTTP::Request">HTTP::Request</a>/<a href="http://search.cpan.org/perldoc/HTTP::Response">HTTP::Response</a> compatibility</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/HTTP::Tiny::Mech">HTTP::Tiny::Mech</a> - Wrap <a href="http://search.cpan.org/perldoc/WWW::Mechanize">WWW::Mechanize</a> instance in HTTP::Tiny compatible interface</p>
</li>
<li>
<p><a href="../IO/Socket/IP.html">IO::Socket::IP</a> - Required for IPv6 support</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/IO::Socket::SSL">IO::Socket::SSL</a> - Required for SSL support</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/LWP::UserAgent">LWP::UserAgent</a> - If HTTP::Tiny isn't enough for you, this is the "standard" way to do things</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/Mozilla::CA">Mozilla::CA</a> - Required if you want to validate SSL certificates</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/Net::SSLeay">Net::SSLeay</a> - Required for SSL support</p>
</li>
</ul>
<a name="SUPPORT"></a><h1>SUPPORT</h1>
<a name="Bugs-%2f-Feature-Requests"></a><h2>Bugs / Feature Requests</h2>
<p>Please report any bugs or feature requests through the issue tracker
at <a href="https://github.com/chansen/p5-http-tiny/issues">https://github.com/chansen/p5-http-tiny/issues</a>.
You will be notified automatically of any progress on your issue.</p>
<a name="Source-Code"></a><h2>Source Code</h2>
<p>This is open source software.  The code repository is available for
public review and contribution under the terms of the license.</p>
<p><a href="https://github.com/chansen/p5-http-tiny">https://github.com/chansen/p5-http-tiny</a></p>
<pre class="verbatim"><ol><li>  <span class="w">git</span> <span class="w">clone</span> <span class="w">https</span><span class="co">:</span><span class="q">//github</span>.<span class="w">com</span>/<span class="w">chansen</span>/<span class="w">p5</span>-<span class="w">http</span>-<span class="w">tiny</span>.<span class="w">git</span></li></ol></pre><a name="AUTHORS"></a><h1>AUTHORS</h1>
<ul>
<li>
<p>Christian Hansen &lt;chansen@cpan.org&gt;</p>
</li>
<li>
<p>David Golden &lt;dagolden@cpan.org&gt;</p>
</li>
</ul>
<a name="CONTRIBUTORS"></a><h1>CONTRIBUTORS</h1>
<ul>
<li>
<p>Alan Gardner &lt;gardner@pythian.com&gt;</p>
</li>
<li>
<p>Alessandro Ghedini &lt;al3xbio@gmail.com&gt;</p>
</li>
<li>
<p>Brad Gilbert &lt;bgills@cpan.org&gt;</p>
</li>
<li>
<p>Chris Nehren &lt;apeiron@cpan.org&gt;</p>
</li>
<li>
<p>Chris Weyl &lt;cweyl@alumni.drew.edu&gt;</p>
</li>
<li>
<p>Claes Jakobsson &lt;claes@surfar.nu&gt;</p>
</li>
<li>
<p>Clinton Gormley &lt;clint@traveljury.com&gt;</p>
</li>
<li>
<p>Craig Berry &lt;cberry@cpan.org&gt;</p>
</li>
<li>
<p>David Mitchell &lt;davem@iabyn.com&gt;</p>
</li>
<li>
<p>Edward Zborowski &lt;ed@rubensteintech.com&gt;</p>
</li>
<li>
<p>Jess Robinson &lt;castaway@desert-island.me.uk&gt;</p>
</li>
<li>
<p>Lukas Eklund &lt;leklund@gmail.com&gt;</p>
</li>
<li>
<p>Martin J. Evans &lt;mjegh@ntlworld.com&gt;</p>
</li>
<li>
<p>Martin-Louis Bright &lt;mlbright@gmail.com&gt;</p>
</li>
<li>
<p>Mike Doherty &lt;doherty@cpan.org&gt;</p>
</li>
<li>
<p>Petr P&#xed;sa&#x159; &lt;ppisar@redhat.com&gt;</p>
</li>
<li>
<p>Serguei Trouchelle &lt;stro@cpan.org&gt;</p>
</li>
<li>
<p>Syohei YOSHIDA &lt;syohex@gmail.com&gt;</p>
</li>
<li>
<p>Tony Cook &lt;tony@develop-help.com&gt;</p>
</li>
</ul>
<a name="COPYRIGHT-AND-LICENSE"></a><h1>COPYRIGHT AND LICENSE</h1>
<p>This software is copyright (c) 2014 by Christian Hansen.</p>
<p>This is free software; you can redistribute it and/or modify it under
the same terms as the Perl 5 programming language system itself.</p>




  <div id="page_index" class="hud_container">
    <div id="page_index_header" class="hud_header">
      <div id="page_index_close" class="hud_close"><a href="#" onClick="pageIndex.hide();return false;"></a></div>
      <div id="page_index_title" class="hud_title"><span class="hud_span_top">Page index</span></div>
      <div id="page_index_topright" class="hud_topright"></div>
    </div>
    <div id="page_index_content" class="hud_content">
      <ul><li><a href="#NAME">NAME</a><li><a href="#VERSION">VERSION</a><li><a href="#SYNOPSIS">SYNOPSIS</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#METHODS">METHODS</a><ul><li><a href="#new">new</a><li><a href="#get%7chead%7cput%7cpost%7cdelete">get|head|put|post|delete</a><li><a href="#post_form">post_form</a><li><a href="#mirror">mirror</a><li><a href="#request">request</a><li><a href="#www_form_urlencode">www_form_urlencode</a></ul><li><a href="#SSL-SUPPORT">SSL SUPPORT</a><li><a href="#PROXY-SUPPORT">PROXY SUPPORT</a><li><a href="#LIMITATIONS">LIMITATIONS</a><li><a href="#SEE-ALSO">SEE ALSO</a><li><a href="#SUPPORT">SUPPORT</a><ul><li><a href="#Bugs-%2f-Feature-Requests">Bugs / Feature Requests</a><li><a href="#Source-Code">Source Code</a></ul><li><a href="#AUTHORS">AUTHORS</a><li><a href="#CONTRIBUTORS">CONTRIBUTORS</a><li><a href="#COPYRIGHT-AND-LICENSE">COPYRIGHT AND LICENSE</a></ul>
    </div>
    <div id="page_index_footer" class="hud_footer">
      <div id="page_index_bottomleft" class="hud_bottomleft"></div>
      <div id="page_index_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
      <div id="page_index_resize" class="hud_resize"></div>
    </div>
  </div>


                </div>
              </article>
        </div>        
      </main>
    </div>
    <footer class="footer row bg-light pt-5 pb-5">
      <div class="col-sm-8 offset-sm-2">
        <div class="row">
          <div class="col-md-4">
            <ul class="list-unstyled">
              <li>
                <h4>Site info</h4>
              </li>
              <li>Site mantained by
                <a href="mailto:community@opusvl.com"><img class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo"></a>
              </li>
              <li>Docs mantained by
                <a href="//lists.cpan.org/showlist.cgi?name=perl5-porters" rel="noopener">Perl 5 Porters</a>
              </li>
              <li>Development supported by
                <a href="//opusvl.com" rel="noopener">OpusVL</a>
              </li>
            </ul>
          </div>
          <div class="col-md-8">
            <div class="row">
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Manual</h4>
                  </li>
                  <li>
                    <a href="/5/20/0/index-overview.html">Overview</a>
                  </li>
                  <li>
                    <a href="/5/20/0/index-tutorials.html">Tutorials</a>
                  </li>
                  <li>
                    <a href="/5/20/0/index-faq.html">FAQs</a>
                  </li>
                  <li>
                    <a href="/5/20/0/index-history.html">Changes</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Reference</h4>
                  </li>
                  <li>
                    <a href="/5/20/0/index-language.html">Language</a>
                  </li>
                  <li>
                    <a href="/5/20/0/index-functions.html">Functions</a>
                  </li>
                  <li>
                    <a href="/5/20/0/perlop.html">Operators</a>
                  </li>
                  <li>
                    <a href="/5/20/0/perlvar.html">Variables</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Modules</h4>
                  </li>
                  <li>
                    <a href="/5/20/0/index-modules-A.html">Modules</a>
                  </li>
                  <li>
                    <a href="/5/20/0/index-pragmas.html">Pragmas</a>
                  </li>
                  <li>
                    <a href="/5/20/0/index-utilities.html">Utilities</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Misc</h4>
                  </li>
                  <li>
                    <a href="/5/20/0/index-licence.html">License</a>
                  </li>
                  <li>
                    <a href="/5/20/0/index-internals.html">Internals</a>
                  </li>
                  <li>
                    <a href="/5/20/0/index-platforms.html">Platforms</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class=" col-12 footer-inf text-center">
            <small>perldoc.perl.org - Official documentation for the Perl programming language</small>
          </div>
        </div>
      </div>
    </footer>
    <script src="/public/js/main.min.js"></script>
  </body>
</html>
